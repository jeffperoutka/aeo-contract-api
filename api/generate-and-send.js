{"data":"LyoqCiAqIEFFTyBMYWJzIMOiwoDClCBDb250cmFjdCBHZW5lcmF0aW9uICYgU2lnbk5vdyBBUEkKICoKICogU2luZ2xlIHNlcnZlcmxlc3MgZW5kcG9pbnQgdGhhdDoKICogMS4gUmVjZWl2ZXMgY29udHJhY3QgZGF0YSAoZnJvbSBaYXBpZXIvVHlwZWZvcm0gd2ViaG9vaykKICogMi4gR2VuZXJhdGVzIHRoZSAuZG9jeCBjb250cmFjdCB3aXRoIEplZmYncyBzaWduYXR1cmUgcHJlLWVtYmVkZGVkCiAqIDMuIFVwbG9hZHMgdG8gU2lnbk5vdwogKiA0LiBQbGFjZXMgQ0xJRU5ULU9OTFkgc2lnbmF0dXJlIGZpZWxkcwogKiA1LiBTZW5kcyBzaWduaW5nIGludml0ZSB0byBjbGllbnQKICoKICogUE9TVCAvYXBpL2dlbmVyYXRlLWFuZC1zZW5kCiAqIEJvZHk6IHsKICogICBjb250cmFjdF90eXBlOiAic3ByaW50MSIgfCAicGhhc2UyIiwKICogICBjbGllbnRfY29tcGFueSwgY2xpZW50X2ZpcnN0LCBjbGllbnRfbGFzdCwgY2xpZW50X3RpdGxlLCBjbGllbnRfZW1haWwsCiAqICAgYW1vdW50LCBzY29wZSAocGhhc2UyKSB8IGRlbGl2ZXJhYmxlIChzcHJpbnQxKSwKICogICBkYXRlIChvcHRpb25hbCwgZGVmYXVsdHMgdG8gdG9kYXkpCiAqIH0KICovCgpjb25zdCBodHRwcyA9IHJlcXVpcmUoImh0dHBzIik7CmNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKY29uc3QgcGF0aCA9IHJlcXVpcmUoInBhdGgiKTsKY29uc3Qgb3MgPSByZXF1aXJlKCJvcyIpOwpjb25zdCB7CiAgRG9jdW1lbnQsIFBhY2tlciwgUGFyYWdyYXBoLCBUZXh0UnVuLCBUYWJsZSwgVGFibGVSb3csIFRhYmxlQ2VsbCwKICBIZWFkZXIsIEZvb3RlciwgQWxpZ25tZW50VHlwZSwgSGVhZGluZ0xldmVsLCBCb3JkZXJTdHlsZSwgV2lkdGhUeXBlLAogIFNoYWRpbmdUeXBlLCBQYWdlTnVtYmVyLCBQYWdlQnJlYWssIFRhYlN0b3BUeXBlLCBUYWJTdG9wUG9zaXRpb24sCiAgSW1hZ2VSdW4sCn0gPSByZXF1aXJlKCJkb2N4Iik7CgovLyDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpAKLy8gU0lHTk5PVyBDT05GSUcKY29uc3QgRElTQUJMRV9TSUdOTk9XX0lOVklURSA9IHRydWU7IC8vIFNldCB0byBmYWxzZSB0byByZS1lbmFibGUKLy8gw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQCmNvbnN0IFNOX0NMSUVOVF9JRCAgICAgPSBwcm9jZXNzLmVudi5TSUdOTk9XX0NMSUVOVF9JRCAgICAgfHwgImMzMzk4Yjg3MWFiNjc3NzllZDEwOTBhYzFkMzRkZmUxIjsKY29uc3QgU05fQ0xJRU5UX1NFQ1JFVCA9IHByb2Nlc3MuZW52LlNJR05OT1dfQ0xJRU5UX1NFQ1JFVCB8fCAiMGJkZTVjMjk0Y2U3OTFlOWRlOTEwNjlmMWMzMzQ2ODIiOwpjb25zdCBTTl9FTUFJTCAgICAgICAgID0gcHJvY2Vzcy5lbnYuU0lHTk5PV19FTUFJTCAgICAgICAgIHx8ICJKZWZmQGFlb2xhYnMuYWkiOwpjb25zdCBTTl9QQVNTV09SRCAgICAgID0gcHJvY2Vzcy5lbnYuU0lHTk5PV19QQVNTV09SRCAgICAgIHx8ICJKRUZGcGFzczEyMyEiOwpjb25zdCBTTl9CQVNFICAgICAgICAgID0gImFwaS5zaWdubm93LmNvbSI7CmNvbnN0IEpFRkZfRU1BSUwgICAgICAgPSAiSmVmZkBhZW9sYWJzLmFpIjsKY29uc3QgVFlQRUZPUk1fVVJMICAgICA9ICJodHRwczovL2Zvcm0udHlwZWZvcm0uY29tL3RvL3BKMUt5T0FGIjsKCi8vIMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkAovLyBTSUdOTk9XIEhFTFBFUlMKLy8gw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQCgpmdW5jdGlvbiBzblJlcXVlc3QobWV0aG9kLCB1cmxQYXRoLCBoZWFkZXJzLCBib2R5KSB7CiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgIGNvbnN0IG9wdHMgPSB7IGhvc3RuYW1lOiBTTl9CQVNFLCBwb3J0OiA0NDMsIHBhdGg6IHVybFBhdGgsIG1ldGhvZCwgaGVhZGVyczogaGVhZGVycyB8fCB7fSB9OwogICAgY29uc3QgcmVxID0gaHR0cHMucmVxdWVzdChvcHRzLCAocmVzKSA9PiB7CiAgICAgIGxldCBkYXRhID0gIiI7CiAgICAgIHJlcy5vbigiZGF0YSIsIChjKSA9PiAoZGF0YSArPSBjKSk7CiAgICAgIHJlcy5vbigiZW5kIiwgKCkgPT4gewogICAgICAgIHRyeSB7IHJlc29sdmUoeyBzdGF0dXM6IHJlcy5zdGF0dXNDb2RlLCBib2R5OiBKU09OLnBhcnNlKGRhdGEpIH0pOyB9CiAgICAgICAgY2F0Y2ggeyByZXNvbHZlKHsgc3RhdHVzOiByZXMuc3RhdHVzQ29kZSwgYm9keTogZGF0YSB9KTsgfQogICAgICB9KTsKICAgIH0pOwogICAgcmVxLm9uKCJlcnJvciIsIHJlamVjdCk7CiAgICBpZiAoYm9keSkgcmVxLndyaXRlKGJvZHkpOwogICAgcmVxLmVuZCgpOwogIH0pOwp9CgpmdW5jdGlvbiBzbk11bHRpcGFydCh1cmxQYXRoLCB0b2tlbiwgZmlsZUJ1ZmZlciwgZmlsZU5hbWUpIHsKICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgY29uc3QgYm91bmRhcnkgPSAiLS0tLUFFT0JvdW5kYXJ5IiArIERhdGUubm93KCk7CiAgICBjb25zdCBtaW1lVHlwZSA9IGZpbGVOYW1lLmVuZHNXaXRoKCIuZG9jeCIpCiAgICAgID8gImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC53b3JkcHJvY2Vzc2luZ21sLmRvY3VtZW50IgogICAgICA6ICJhcHBsaWNhdGlvbi9wZGYiOwoKICAgIGNvbnN0IGhlYWQgPSBCdWZmZXIuZnJvbSgKICAgICAgYC0tJHtib3VuZGFyeX1cclxuQ29udGVudC1EaXNwb3NpdGlvbjogZm9ybS1kYXRhOyBuYW1lPSJmaWxlIjsgZmlsZW5hbWU9IiR7ZmlsZU5hbWV9IlxyXG5Db250ZW50LVR5cGU6ICR7bWltZVR5cGV9XHJcblxyXG5gCiAgICApOwogICAgY29uc3QgdGFpbCA9IEJ1ZmZlci5mcm9tKGBcclxuLS0ke2JvdW5kYXJ5fS0tXHJcbmApOwogICAgY29uc3QgcGF5bG9hZCA9IEJ1ZmZlci5jb25jYXQoW2hlYWQsIGZpbGVCdWZmZXIsIHRhaWxdKTsKCiAgICBjb25zdCBvcHRzID0gewogICAgICBob3N0bmFtZTogU05fQkFTRSwgcG9ydDogNDQzLCBwYXRoOiB1cmxQYXRoLCBtZXRob2Q6ICJQT1NUIiwKICAgICAgaGVhZGVyczogewogICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbn1gLAogICAgICAgICJDb250ZW50LVR5cGUiOiBgbXVsdGlwYXJ0L2Zvcm0tZGF0YTsgYm91bmRhcnk9JHtib3VuZGFyeX1gLAogICAgICAgICJDb250ZW50LUxlbmd0aCI6IHBheWxvYWQubGVuZ3RoLAogICAgICB9LAogICAgfTsKICAgIGNvbnN0IHJlcSA9IGh0dHBzLnJlcXVlc3Qob3B0cywgKHJlcykgPT4gewogICAgICBsZXQgZGF0YSA9ICIiOwogICAgICByZXMub24oImRhdGEiLCAoYykgPT4gKGRhdGEgKz0gYykpOwogICAgICByZXMub24oImVuZCIsICgpID0+IHsKICAgICAgICB0cnkgeyByZXNvbHZlKHsgc3RhdHVzOiByZXMuc3RhdHVzQ29kZSwgYm9keTogSlNPTi5wYXJzZShkYXRhKSB9KTsgfQogICAgICAgIGNhdGNoIHsgcmVzb2x2ZSh7IHN0YXR1czogcmVzLnN0YXR1c0NvZGUsIGJvZHk6IGRhdGEgfSk7IH0KICAgICAgfSk7CiAgICB9KTsKICAgIHJlcS5vbigiZXJyb3IiLCByZWplY3QpOwogICAgcmVxLndyaXRlKHBheWxvYWQpOwogICAgcmVxLmVuZCgpOwogIH0pOwp9Cgphc3luYyBmdW5jdGlvbiBzbkF1dGhlbnRpY2F0ZSgpIHsKICBjb25zdCBwYXlsb2FkID0gYHVzZXJuYW1lPSR7ZW5jb2RlVVJJQ29tcG9uZW50KFNOX0VNQUlMKX0mcGFzc3dvcmQ9JHtlbmNvZGVVUklDb21wb25lbnQoU05fUEFTU1dPUkQpfSZncmFudF90eXBlPXBhc3N3b3JkJnNjb3BlPSpgOwogIGNvbnN0IGF1dGggPSBCdWZmZXIuZnJvbShgJHtTTl9DTElFTlRfSUR9OiR7U05fQ0xJRU5UX1NFQ1JFVH1gKS50b1N0cmluZygiYmFzZTY0Iik7CiAgY29uc3QgcmVzID0gYXdhaXQgc25SZXF1ZXN0KCJQT1NUIiwgIi9vYXV0aDIvdG9rZW4iLCB7CiAgICBBdXRob3JpemF0aW9uOiBgQmFzaWMgJHthdXRofWAsCiAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIsCiAgICAiQ29udGVudC1MZW5ndGgiOiBCdWZmZXIuYnl0ZUxlbmd0aChwYXlsb2FkKSwKICB9LCBwYXlsb2FkKTsKICBpZiAoIXJlcy5ib2R5LmFjY2Vzc190b2tlbikgdGhyb3cgbmV3IEVycm9yKCJTaWduTm93IGF1dGggZmFpbGVkOiAiICsgSlNPTi5zdHJpbmdpZnkocmVzLmJvZHkpKTsKICByZXR1cm4gcmVzLmJvZHkuYWNjZXNzX3Rva2VuOwp9Cgphc3luYyBmdW5jdGlvbiBzblVwbG9hZCh0b2tlbiwgYnVmZmVyLCBmaWxlTmFtZSkgewogIGNvbnN0IHJlcyA9IGF3YWl0IHNuTXVsdGlwYXJ0KCIvZG9jdW1lbnQiLCB0b2tlbiwgYnVmZmVyLCBmaWxlTmFtZSk7CiAgaWYgKCFyZXMuYm9keS5pZCkgdGhyb3cgbmV3IEVycm9yKCJTaWduTm93IHVwbG9hZCBmYWlsZWQ6ICIgKyBKU09OLnN0cmluZ2lmeShyZXMuYm9keSkpOwogIHJldHVybiByZXMuYm9keS5pZDsKfQoKYXN5bmMgZnVuY3Rpb24gc25HZXREb2NJbmZvKHRva2VuLCBkb2NJZCkgewogIGNvbnN0IHJlcyA9IGF3YWl0IHNuUmVxdWVzdCgiR0VUIiwgYC9kb2N1bWVudC8ke2RvY0lkfWAsIHsKICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbn1gLAogIH0pOwogIHJldHVybiByZXMuYm9keTsKfQoKYXN5bmMgZnVuY3Rpb24gc25BZGRGaWVsZHModG9rZW4sIGRvY0lkLCBwYWdlQ291bnQpIHsKICBjb25zdCBsYXN0UGFnZSA9IHBhZ2VDb3VudCAtIDE7CiAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpOwogIGNvbnN0IGRhdGVTdHIgPSB0b2RheS50b0xvY2FsZURhdGVTdHJpbmcoImVuLVVTIiwgeyB5ZWFyOiAibnVtZXJpYyIsIG1vbnRoOiAic2hvcnQiLCBkYXk6ICJudW1lcmljIiB9KTsKCiAgY29uc3QgcGF5bG9hZCA9IEpTT04uc3RyaW5naWZ5KHsKICAgIGZpZWxkczogWwogICAgICB7CiAgICAgICAgeDogNTUsIHk6IDI3MCwgd2lkdGg6IDIyMCwgaGVpZ2h0OiAzNSwKICAgICAgICB0eXBlOiAic2lnbmF0dXJlIiwgcGFnZV9udW1iZXI6IGxhc3RQYWdlLAogICAgICAgIHJlcXVpcmVkOiB0cnVlLCByb2xlOiAiQ2xpZW50IiwgbGFiZWw6ICJTaWduYXR1cmUiLAogICAgICB9LAogICAgICB7CiAgICAgICAgeDogNTUsIHk6IDM0MCwgd2lkdGg6IDE4MCwgaGVpZ2h0OiAyNSwKICAgICAgICB0eXBlOiAidGV4dCIsIHBhZ2VfbnVtYmVyOiBsYXN0UGFnZSwKICAgICAgICByZXF1aXJlZDogdHJ1ZSwgcm9sZTogIkNsaWVudCIsIGxhYmVsOiAiRGF0ZSIsCiAgICAgICAgcHJlZmlsbGVkX3RleHQ6IGRhdGVTdHIsCiAgICAgIH0sCiAgICBdLAogIH0pOwoKICBjb25zdCByZXMgPSBhd2FpdCBzblJlcXVlc3QoIlBVVCIsIGAvZG9jdW1lbnQvJHtkb2NJZH1gLCB7CiAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW59YCwKICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIsCiAgICAiQ29udGVudC1MZW5ndGgiOiBCdWZmZXIuYnl0ZUxlbmd0aChwYXlsb2FkKSwKICB9LCBwYXlsb2FkKTsKCiAgaWYgKHJlcy5ib2R5LmVycm9ycykgdGhyb3cgbmV3IEVycm9yKCJTaWduTm93IGZpZWxkIGVycm9yOiAiICsgSlNPTi5zdHJpbmdpZnkocmVzLmJvZHkpKTsKICByZXR1cm4gcmVzOwp9Cgphc3luYyBmdW5jdGlvbiBzblNlbmRJbnZpdGUodG9rZW4sIGRvY0lkLCBzaWduZXJFbWFpbCwgc2lnbmVyTmFtZSkgewogIGNvbnN0IHBheWxvYWQgPSBKU09OLnN0cmluZ2lmeSh7CiAgICB0bzogW3sKICAgICAgZW1haWw6IHNpZ25lckVtYWlsLAogICAgICByb2xlOiAiQ2xpZW50IiwKICAgICAgcm9sZV9pZDogIiIsCiAgICAgIG9yZGVyOiAxLAogICAgICByZWFzc2lnbjogIjAiLAogICAgICBkZWNsaW5lX2J5X3NpZ25hdHVyZTogIjAiLAogICAgICByZW1pbmRlcjogMywKICAgICAgZXhwaXJhdGlvbl9kYXlzOiAzMCwKICAgICAgc3ViamVjdDogIkFFTyBMYWJzIMOiwoDClCBDb250cmFjdCBSZWFkeSBmb3IgWW91ciBTaWduYXR1cmUiLAogICAgICBtZXNzYWdlOiBgSGkgJHtzaWduZXJOYW1lfSwgeW91ciBjb250cmFjdCB3aXRoIEFFTyBMYWJzIGlzIHJlYWR5IGZvciBzaWduYXR1cmUuIFBsZWFzZSByZXZpZXcgYW5kIHNpZ24gYXQgeW91ciBjb252ZW5pZW5jZS5gLAogICAgICByZWRpcmVjdF91cmk6IFRZUEVGT1JNX1VSTCwKICAgIH1dLAogICAgZnJvbTogSkVGRl9FTUFJTCwKICAgIHN1YmplY3Q6ICJBRU8gTGFicyDDosKAwpQgQ29udHJhY3QgZm9yIFNpZ25hdHVyZSIsCiAgICBtZXNzYWdlOiAiUGxlYXNlIHJldmlldyBhbmQgc2lnbiB0aGUgYXR0YWNoZWQgY29udHJhY3QuIiwKICB9KTsKCiAgY29uc3QgcmVzID0gYXdhaXQgc25SZXF1ZXN0KCJQT1NUIiwgYC9kb2N1bWVudC8ke2RvY0lkfS9pbnZpdGVgLCB7CiAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW59YCwKICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIsCiAgICAiQ29udGVudC1MZW5ndGgiOiBCdWZmZXIuYnl0ZUxlbmd0aChwYXlsb2FkKSwKICB9LCBwYXlsb2FkKTsKCiAgaWYgKHJlcy5ib2R5LmVycm9ycykgdGhyb3cgbmV3IEVycm9yKCJTaWduTm93IGludml0ZSBlcnJvcjogIiArIEpTT04uc3RyaW5naWZ5KHJlcy5ib2R5KSk7CiAgcmV0dXJuIHJlczsKfQoKLy8gw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQw6LClcKQCi8vIENPTlRSQUNUIEdFTkVSQVRJT04gKGVtYmVkZGVkIMOiwoDClCBzYW1lIGxvZ2ljIGFzIGdlbmVyYXRlX2NvbnRyYWN0LmpzKQovLyDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpAKCmNvbnN0IEZPTlQgPSAiU3BhY2UgR3JvdGVzayI7CmNvbnN0IEJMQUNLID0gIjAwMDAwMCI7CmNvbnN0IERBUktfR1JBWSA9ICIzMzMzMzMiOwpjb25zdCBNRURJVU1fR1JBWSA9ICI2NjY2NjYiOwpjb25zdCBMSUdIVF9HUkFZID0gIjk5OTk5OSI7Cgpjb25zdCBub0JvcmRlciA9IHsgc3R5bGU6IEJvcmRlclN0eWxlLk5PTkUsIHNpemU6IDAsIGNvbG9yOiAiRkZGRkZGIiB9OwoKZnVuY3Rpb24gc2VjdGlvblRpdGxlKG51bWJlciwgdGl0bGUpIHsKICByZXR1cm4gbmV3IFBhcmFncmFwaCh7CiAgICBzcGFjaW5nOiB7IGJlZm9yZTogMzgwLCBhZnRlcjogMTYwIH0sCiAgICBib3JkZXI6IHsgYm90dG9tOiB7IHN0eWxlOiBCb3JkZXJTdHlsZS5TSU5HTEUsIHNpemU6IDMsIGNvbG9yOiBCTEFDSywgc3BhY2U6IDYgfSB9LAogICAgY2hpbGRyZW46IFsKICAgICAgbmV3IFRleHRSdW4oeyB0ZXh0OiBgU2VjdGlvbiAke251bWJlcn06ICBgLCBib2xkOiB0cnVlLCBmb250OiBGT05ULCBzaXplOiAyMiwgY29sb3I6IEJMQUNLIH0pLAogICAgICBuZXcgVGV4dFJ1bih7IHRleHQ6IHRpdGxlLCBib2xkOiB0cnVlLCBmb250OiBGT05ULCBzaXplOiAyMiwgY29sb3I6IEJMQUNLIH0pLAogICAgXSwKICB9KTsKfQoKZnVuY3Rpb24gYm9keVRleHQodGV4dCkgewogIHJldHVybiBuZXcgUGFyYWdyYXBoKHsKICAgIHNwYWNpbmc6IHsgYWZ0ZXI6IDE2MCwgbGluZTogMjc2IH0sCiAgICBjaGlsZHJlbjogW25ldyBUZXh0UnVuKHsgdGV4dCwgZm9udDogRk9OVCwgc2l6ZTogMjAsIGNvbG9yOiBEQVJLX0dSQVkgfSldLAogIH0pOwp9CgpmdW5jdGlvbiBib2xkQm9keVRleHQobGFiZWwsIHRleHQpIHsKICByZXR1cm4gbmV3IFBhcmFncmFwaCh7CiAgICBzcGFjaW5nOiB7IGFmdGVyOiAxNDAsIGxpbmU6IDI3NiB9LAogICAgY2hpbGRyZW46IFsKICAgICAgbmV3IFRleHRSdW4oeyB0ZXh0OiBsYWJlbCwgYm9sZDogdHJ1ZSwgZm9udDogRk9OVCwgc2l6ZTogMjAsIGNvbG9yOiBCTEFDSyB9KSwKICAgICAgbmV3IFRleHRSdW4oeyB0ZXh0LCBmb250OiBGT05ULCBzaXplOiAyMCwgY29sb3I6IERBUktfR1JBWSB9KSwKICAgIF0sCiAgfSk7Cn0KCmZ1bmN0aW9uIGhlYWRpbmcodGV4dCkgewogIHJldHVybiBuZXcgUGFyYWdyYXBoKHsKICAgIHNwYWNpbmc6IHsgYmVmb3JlOiAzNDAsIGFmdGVyOiAxNDAgfSwKICAgIGNoaWxkcmVuOiBbbmV3IFRleHRSdW4oeyB0ZXh0LCBib2xkOiB0cnVlLCBmb250OiBGT05ULCBzaXplOiAyNCwgY29sb3I6IEJMQUNLIH0pXSwKICB9KTsKfQoKLy8gSmVmZidzIHNpZ25hdHVyZSBpbWFnZSDDosKAwpQgYnVuZGxlZCBhcyBiYXNlNjQgZm9yIHNlcnZlcmxlc3MgKG5vIGZpbGVzeXN0ZW0gZGVwZW5kZW5jeSkKbGV0IEpFRkZfU0lHX0JVRkZFUiA9IG51bGw7CnRyeSB7CiAgLy8gVHJ5IGxvYWRpbmcgZnJvbSBmaWxlIGZpcnN0IChsb2NhbCBkZXYpCiAgY29uc3Qgc2lnUGF0aCA9IHBhdGguam9pbihfX2Rpcm5hbWUsICIuLiIsICJhc3NldHMiLCAiamVmZl9zaWduYXR1cmUucG5nIik7CiAgaWYgKGZzLmV4aXN0c1N5bmMoc2lnUGF0aCkpIHsKICAgIEpFRkZfU0lHX0JVRkZFUiA9IGZzLnJlYWRGaWxlU3luYyhzaWdQYXRoKTsKICB9Cn0gY2F0Y2gge30KCi8vIEZhbGxiYWNrOiBsb2FkIGZyb20gYmFzZTY0IGVudiB2YXIgKHByb2R1Y3Rpb24pCmlmICghSkVGRl9TSUdfQlVGRkVSICYmIHByb2Nlc3MuZW52LkpFRkZfU0lHTkFUVVJFX0JBU0U2NCkgewogIEpFRkZfU0lHX0JVRkZFUiA9IEJ1ZmZlci5mcm9tKHByb2Nlc3MuZW52LkpFRkZfU0lHTkFUVVJFX0JBU0U2NCwgImJhc2U2NCIpOwp9CgpmdW5jdGlvbiBzaWduYXR1cmVCbG9jayhuYW1lLCB0aXRsZSwgY29tcGFueSwgcHJlZmlsbGVkLCBmb3JtYXR0ZWREYXRlKSB7CiAgY29uc3QgZGF0ZVRleHQgPSBwcmVmaWxsZWQgPyBmb3JtYXR0ZWREYXRlIDogIiAiOwoKICBjb25zdCBzaWdMaW5lQ2hpbGRyZW4gPSBwcmVmaWxsZWQgJiYgSkVGRl9TSUdfQlVGRkVSCiAgICA/IFtuZXcgSW1hZ2VSdW4oewogICAgICAgIGRhdGE6IEpFRkZfU0lHX0JVRkZFUiwKICAgICAgICB0cmFuc2Zvcm1hdGlvbjogeyB3aWR0aDogMjAwLCBoZWlnaHQ6IDU4IH0sCiAgICAgICAgdHlwZTogInBuZyIsCiAgICAgIH0pXQogICAgOiBbbmV3IFRleHRSdW4oeyB0ZXh0OiAiICIsIGZvbnQ6IEZPTlQsIHNpemU6IDIwLCBjb2xvcjogIkZGRkZGRiIgfSldOwoKICByZXR1cm4gWwogICAgbmV3IFBhcmFncmFwaCh7IHNwYWNpbmc6IHsgYmVmb3JlOiA0MDAgfSwgY2hpbGRyZW46IFtdIH0pLAogICAgbmV3IFBhcmFncmFwaCh7CiAgICAgIHNwYWNpbmc6IHsgYWZ0ZXI6IDggfSwKICAgICAgYm9yZGVyOiB7IGJvdHRvbTogeyBzdHlsZTogQm9yZGVyU3R5bGUuU0lOR0xFLCBzaXplOiAzLCBjb2xvcjogQkxBQ0ssIHNwYWNlOiAxIH0gfSwKICAgICAgY2hpbGRyZW46IHNpZ0xpbmVDaGlsZHJlbiwKICAgIH0pLAogICAgbmV3IFBhcmFncmFwaCh7CiAgICAgIHNwYWNpbmc6IHsgYWZ0ZXI6IDMwIH0sCiAgICAgIGNoaWxkcmVuOiBbbmV3IFRleHRSdW4oeyB0ZXh0OiAiU2lnbmF0dXJlIiwgZm9udDogRk9OVCwgc2l6ZTogMTcsIGNvbG9yOiBNRURJVU1fR1JBWSwgaXRhbGljczogdHJ1ZSB9KV0sCiAgICB9KSwKICAgIG5ldyBQYXJhZ3JhcGgoeyBzcGFjaW5nOiB7IGJlZm9yZTogMjAwIH0sIGNoaWxkcmVuOiBbXSB9KSwKICAgIG5ldyBQYXJhZ3JhcGgoewogICAgICBzcGFjaW5nOiB7IGFmdGVyOiA4IH0sCiAgICAgIGJvcmRlcjogeyBib3R0b206IHsgc3R5bGU6IEJvcmRlclN0eWxlLlNJTkdMRSwgc2l6ZTogMywgY29sb3I6IEJMQUNLLCBzcGFjZTogMSB9IH0sCiAgICAgIGNoaWxkcmVuOiBbbmV3IFRleHRSdW4oeyB0ZXh0OiBkYXRlVGV4dCwgZm9udDogRk9OVCwgc2l6ZTogMjAsIGNvbG9yOiBwcmVmaWxsZWQgPyBEQVJLX0dSQVkgOiAiRkZGRkZGIiB9KV0sCiAgICB9KSwKICAgIG5ldyBQYXJhZ3JhcGgoewogICAgICBzcGFjaW5nOiB7IGFmdGVyOiAzMCB9LAogICAgICBjaGlsZHJlbjogW25ldyBUZXh0UnVuKHsgdGV4dDogIkRhdGUiLCBmb250OiBGT05ULCBzaXplOiAxNywgY29sb3I6IE1FRElVTV9HUkFZLCBpdGFsaWNzOiB0cnVlIH0pXSwKICAgIH0pLAogICAgbmV3IFBhcmFncmFwaCh7CiAgICAgIHNwYWNpbmc6IHsgYmVmb3JlOiAxNDAsIGFmdGVyOiAzMCB9LAogICAgICBjaGlsZHJlbjogW25ldyBUZXh0UnVuKHsgdGV4dDogbmFtZSwgYm9sZDogdHJ1ZSwgZm9udDogRk9OVCwgc2l6ZTogMjAsIGNvbG9yOiBCTEFDSyB9KV0sCiAgICB9KSwKICAgIG5ldyBQYXJhZ3JhcGgoewogICAgICBzcGFjaW5nOiB7IGFmdGVyOiAzMCB9LAogICAgICBjaGlsZHJlbjogW25ldyBUZXh0UnVuKHsgdGV4dDogdGl0bGUsIGZvbnQ6IEZPTlQsIHNpemU6IDIwLCBjb2xvcjogTUVESVVNX0dSQVkgfSldLAogICAgfSksCiAgICBuZXcgUGFyYWdyYXBoKHsKICAgICAgc3BhY2luZzogeyBhZnRlcjogMzAgfSwKICAgICAgY2hpbGRyZW46IFtuZXcgVGV4dFJ1bih7IHRleHQ6IGNvbXBhbnksIGZvbnQ6IEZPTlQsIHNpemU6IDIwLCBjb2xvcjogTUVESVVNX0dSQVkgfSldLAogICAgfSksCiAgXTsKfQoKZnVuY3Rpb24gdGl0bGVQYWdlKHN1YnRpdGxlLCBjbGllbnRDb21wYW55LCBjbGllbnRGaXJzdCwgY2xpZW50TGFzdCwgY2xpZW50VGl0bGUsIGZvcm1hdHRlZERhdGUpIHsKICByZXR1cm4gWwogICAgbmV3IFBhcmFncmFwaCh7IHNwYWNpbmc6IHsgYmVmb3JlOiAyNDAwIH0sIGNoaWxkcmVuOiBbXSB9KSwKICAgIG5ldyBQYXJhZ3JhcGgoewogICAgICBhbGlnbm1lbnQ6IEFsaWdubWVudFR5cGUuQ0VOVEVSLCBzcGFjaW5nOiB7IGFmdGVyOiA0MCB9LAogICAgICBjaGlsZHJlbjogW25ldyBUZXh0UnVuKHsgdGV4dDogIkFFTyBMQUJTIiwgYm9sZDogdHJ1ZSwgZm9udDogRk9OVCwgc2l6ZTogNjAsIGNvbG9yOiBCTEFDSyB9KV0sCiAgICB9KSwKICAgIG5ldyBQYXJhZ3JhcGgoewogICAgICBhbGlnbm1lbnQ6IEFsaWdubWVudFR5cGUuQ0VOVEVSLCBzcGFjaW5nOiB7IGFmdGVyOiA4MCB9LAogICAgICBjaGlsZHJlbjogW25ldyBUZXh0UnVuKHsgdGV4dDogIkxMQyIsIGJvbGQ6IHRydWUsIGZvbnQ6IEZPTlQsIHNpemU6IDI2LCBjb2xvcjogTUVESVVNX0dSQVkgfSldLAogICAgfSksCiAgICBuZXcgUGFyYWdyYXBoKHsKICAgICAgYWxpZ25tZW50OiBBbGlnbm1lbnRUeXBlLkNFTlRFUiwKICAgICAgYm9yZGVyOiB7IGJvdHRvbTogeyBzdHlsZTogQm9yZGVyU3R5bGUuU0lOR0xFLCBzaXplOiA2LCBjb2xvcjogQkxBQ0ssIHNwYWNlOiAxMiB9IH0sCiAgICAgIHNwYWNpbmc6IHsgYWZ0ZXI6IDM2MCB9LCBjaGlsZHJlbjogW10sCiAgICB9KSwKICAgIG5ldyBQYXJhZ3JhcGgoewogICAgICBhbGlnbm1lbnQ6IEFsaWdubWVudFR5cGUuQ0VOVEVSLCBzcGFjaW5nOiB7IGFmdGVyOiA2MCB9LAogICAgICBjaGlsZHJlbjogW25ldyBUZXh0UnVuKHsgdGV4dDogIk1BU1RFUiBTRVJWSUNFUyBBR1JFRU1FTlQiLCBib2xkOiB0cnVlLCBmb250OiBGT05ULCBzaXplOiAyOCwgY29sb3I6IEJMQUNLIH0pXSwKICAgIH0pLAogICAgbmV3IFBhcmFncmFwaCh7CiAgICAgIGFsaWdubWVudDogQWxpZ25tZW50VHlwZS5DRU5URVIsIHNwYWNpbmc6IHsgYWZ0ZXI6IDYwIH0sCiAgICAgIGNoaWxkcmVuOiBbbmV3IFRleHRSdW4oeyB0ZXh0OiAiJiIsIGZvbnQ6IEZPTlQsIHNpemU6IDI0LCBjb2xvcjogTUVESVVNX0dSQVkgfSldLAogICAgfSksCiAgICBuZXcgUGFyYWdyYXBoKHsKICAgICAgYWxpZ25tZW50OiBBbGlnbm1lbnRUeXBlLkNFTlRFUiwgc3BhY2luZzogeyBhZnRlcjogMjYwIH0sCiAgICAgIGNoaWxkcmVuOiBbbmV3IFRleHRSdW4oeyB0ZXh0OiAiU1RBVEVNRU5UIE9GIFdPUksiLCBib2xkOiB0cnVlLCBmb250OiBGT05ULCBzaXplOiAyOCwgY29sb3I6IEJMQUNLIH0pXSwKICAgIH0pLAogICAgbmV3IFBhcmFncmFwaCh7CiAgICAgIGFsaWdubWVudDogQWxpZ25tZW50VHlwZS5DRU5URVIsIHNwYWNpbmc6IHsgYWZ0ZXI6IDEwMCB9LAogICAgICBjaGlsZHJlbjogW25ldyBUZXh0UnVuKHsgdGV4dDogc3VidGl0bGUsIGJvbGQ6IHRydWUsIGZvbnQ6IEZPTlQsIHNpemU6IDIyLCBjb2xvcjogREFSS19HUkFZIH0pXSwKICAgIH0pLAogICAgbmV3IFBhcmFncmFwaCh7CiAgICAgIGFsaWdubWVudDogQWxpZ25tZW50VHlwZS5DRU5URVIsIHNwYWNpbmc6IHsgYWZ0ZXI6IDUwMCB9LAogICAgICBjaGlsZHJlbjogW25ldyBUZXh0UnVuKHsgdGV4dDogZm9ybWF0dGVkRGF0ZSwgZm9udDogRk9OVCwgc2l6ZTogMjAsIGNvbG9yOiBNRURJVU1fR1JBWSB9KV0sCiAgICB9KSwKICAgIG5ldyBQYXJhZ3JhcGgoewogICAgICBhbGlnbm1lbnQ6IEFsaWdubWVudFR5cGUuQ0VOVEVSLCBzcGFjaW5nOiB7IGFmdGVyOiA2MCB9LAogICAgICBjaGlsZHJlbjogWwogICAgICAgIG5ldyBUZXh0UnVuKHsgdGV4dDogIlByZXBhcmVkIGZvciAgIiwgZm9udDogRk9OVCwgc2l6ZTogMjAsIGNvbG9yOiBNRURJVU1fR1JBWSB9KSwKICAgICAgICBuZXcgVGV4dFJ1bih7IHRleHQ6IGNsaWVudENvbXBhbnksIGJvbGQ6IHRydWUsIGZvbnQ6IEZPTlQsIHNpemU6IDIwLCBjb2xvcjogQkxBQ0sgfSksCiAgICAgIF0sCiAgICB9KSwKICAgIG5ldyBQYXJhZ3JhcGgoewogICAgICBhbGlnbm1lbnQ6IEFsaWdubWVudFR5cGUuQ0VOVEVSLCBzcGFjaW5nOiB7IGFmdGVyOiA2MCB9LAogICAgICBjaGlsZHJlbjogW25ldyBUZXh0UnVuKHsgdGV4dDogYCR7Y2xpZW50Rmlyc3R9ICR7Y2xpZW50TGFzdH0sICR7Y2xpZW50VGl0bGV9YCwgZm9udDogRk9OVCwgc2l6ZTogMjAsIGNvbG9yOiBNRURJVU1fR1JBWSB9KV0sCiAgICB9KSwKICBdOwp9CgpmdW5jdGlvbiBwYXJ0aWVzSW50cm8oY2xpZW50Q29tcGFueSwgZm9ybWF0dGVkRGF0ZSkgewogIHJldHVybiBuZXcgUGFyYWdyYXBoKHsKICAgIHNwYWNpbmc6IHsgYmVmb3JlOiAyMDAsIGFmdGVyOiAyMDAsIGxpbmU6IDI3NiB9LAogICAgY2hpbGRyZW46IFsKICAgICAgbmV3IFRleHRSdW4oeyB0ZXh0OiAiVGhpcyBNYXN0ZXIgU2VydmljZXMgQWdyZWVtZW50IGFuZCBTdGF0ZW1lbnQgb2YgV29yayAoY29sbGVjdGl2ZWx5LCB0aGlzIFx1MjAxQ0FncmVlbWVudFx1MjAxRCkgaXMgZW50ZXJlZCBpbnRvIGFzIG9mICIsIGZvbnQ6IEZPTlQsIHNpemU6IDIwLCBjb2xvcjogREFSS19HUkFZIH0pLAogICAgICBuZXcgVGV4dFJ1bih7IHRleHQ6IGZvcm1hdHRlZERhdGUsIGJvbGQ6IHRydWUsIGZvbnQ6IEZPTlQsIHNpemU6IDIwLCBjb2xvcjogQkxBQ0sgfSksCiAgICAgIG5ldyBUZXh0UnVuKHsgdGV4dDogIiBieSBhbmQgYmV0d2VlbiAiLCBmb250OiBGT05ULCBzaXplOiAyMCwgY29sb3I6IERBUktfR1JBWSB9KSwKICAgICAgbmV3IFRleHRSdW4oeyB0ZXh0OiAiQUVPIExhYnMgTExDIiwgYm9sZDogdHJ1ZSwgZm9udDogRk9OVCwgc2l6ZTogMjAsIGNvbG9yOiBCTEFDSyB9KSwKICAgICAgbmV3IFRleHRSdW4oeyB0ZXh0OiAiIChcdTIwMUNTZXJ2aWNlIFByb3ZpZGVyXHUyMDFEKSBhbmQgIiwgZm9udDogRk9OVCwgc2l6ZTogMjAsIGNvbG9yOiBEQVJLX0dSQVkgfSksCiAgICAgIG5ldyBUZXh0UnVuKHsgdGV4dDogY2xpZW50Q29tcGFueSwgYm9sZDogdHJ1ZSwgZm9udDogRk9OVCwgc2l6ZTogMjAsIGNvbG9yOiBCTEFDSyB9KSwKICAgICAgbmV3IFRleHRSdW4oeyB0ZXh0OiAiIChcdTIwMUNDbGllbnRcdTIwMUQpLiIsIGZvbnQ6IEZPTlQsIHNpemU6IDIwLCBjb2xvcjogREFSS19HUkFZIH0pLAogICAgXSwKICB9KTsKfQoKZnVuY3Rpb24gYmFubmVyKHRleHQpIHsKICByZXR1cm4gbmV3IFBhcmFncmFwaCh7CiAgICBzcGFjaW5nOiB7IGJlZm9yZTogMjAwLCBhZnRlcjogMjQwIH0sIGFsaWdubWVudDogQWxpZ25tZW50VHlwZS5DRU5URVIsCiAgICBib3JkZXI6IHsKICAgICAgYm90dG9tOiB7IHN0eWxlOiBCb3JkZXJTdHlsZS5TSU5HTEUsIHNpemU6IDQsIGNvbG9yOiBCTEFDSywgc3BhY2U6IDggfSwKICAgICAgdG9wOiB7IHN0eWxlOiBCb3JkZXJTdHlsZS5TSU5HTEUsIHNpemU6IDQsIGNvbG9yOiBCTEFDSywgc3BhY2U6IDggfSwKICAgIH0sCiAgICBjaGlsZHJlbjogW25ldyBUZXh0UnVuKHsgdGV4dCwgYm9sZDogdHJ1ZSwgZm9udDogRk9OVCwgc2l6ZTogMjQsIGNvbG9yOiBCTEFDSyB9KV0sCiAgfSk7Cn0KCmZ1bmN0aW9uIGJ1aWxkU3ByaW50MShkYXRhKSB7CiAgY29uc3QgeyBjbGllbnRDb21wYW55LCBjbGllbnRGaXJzdCwgY2xpZW50TGFzdCwgY2xpZW50VGl0bGUsIGZvcm1hdHRlZEFtb3VudCwgZm9ybWF0dGVkRGF0ZSwgZGVsaXZlcmFibGUgfSA9IGRhdGE7CiAgY29uc3QgY2xpZW50TmFtZSA9IGAke2NsaWVudEZpcnN0fSAke2NsaWVudExhc3R9YDsKICByZXR1cm4gWwogICAgLi4udGl0bGVQYWdlKCJTcHJpbnQgMSBcdTIwMTQgNjAtRGF5IEVuZ2FnZW1lbnQiLCBjbGllbnRDb21wYW55LCBjbGllbnRGaXJzdCwgY2xpZW50TGFzdCwgY2xpZW50VGl0bGUsIGZvcm1hdHRlZERhdGUpLAogICAgbmV3IFBhcmFncmFwaCh7IGNoaWxkcmVuOiBbbmV3IFBhZ2VCcmVhaygpXSB9KSwKICAgIHBhcnRpZXNJbnRybyhjbGllbnRDb21wYW55LCBmb3JtYXR0ZWREYXRlKSwKICAgIGJhbm5lcigiTUFTVEVSIFNFUlZJQ0VTIEFHUkVFTUVOVCIpLAoKICAgIHNlY3Rpb25UaXRsZSgiMSIsICJTZXJ2aWNlcyIpLAogICAgYm9keVRleHQoYEFFTyBMYWJzIExMQyAoXHUyMDFDU2VydmljZSBQcm92aWRlclx1MjAxRCkgYWdyZWVzIHRvIHByb3ZpZGUgQW5zd2VyIEVuZ2luZSBPcHRpbWl6YXRpb24gc2VydmljZXMgdG8gJHtjbGllbnRDb21wYW55fSAoXHUyMDFDQ2xpZW50XHUyMDFEKSBhcyBkZXNjcmliZWQgaW4gdGhlIFN0YXRlbWVudCBvZiBXb3JrIGF0dGFjaGVkIGhlcmV0by4gU2VydmljZXMgc2hhbGwgbm90IGNvbW1lbmNlIHVudGlsIGZ1bGwgcGF5bWVudCBoYXMgYmVlbiByZWNlaXZlZCBieSBTZXJ2aWNlIFByb3ZpZGVyLmApLAoKICAgIHNlY3Rpb25UaXRsZSgiMiIsICJUZXJtIiksCiAgICBib2R5VGV4dChgVGhpcyBBZ3JlZW1lbnQgc2hhbGwgY29tbWVuY2Ugb24gJHtmb3JtYXR0ZWREYXRlfSBhbmQgc2hhbGwgY29udGludWUgZm9yIGEgcGVyaW9kIG9mIHNpeHR5ICg2MCkgY2FsZW5kYXIgZGF5cyAoXHUyMDFDU3ByaW50IFBlcmlvZFx1MjAxRCksIHVubGVzcyB0ZXJtaW5hdGVkIGVhcmxpZXIgaW4gYWNjb3JkYW5jZSB3aXRoIFNlY3Rpb24gOS5gKSwKCiAgICBzZWN0aW9uVGl0bGUoIjMiLCAiUGF5bWVudCBUZXJtcyIpLAogICAgYm9keVRleHQoYENsaWVudCBzaGFsbCBwYXkgU2VydmljZSBQcm92aWRlciB0aGUgdG90YWwgZmVlIG9mICQke2Zvcm1hdHRlZEFtb3VudH0gVVNEIHVwb24gZXhlY3V0aW9uIG9mIHRoaXMgQWdyZWVtZW50LiBQYXltZW50IGlzIGR1ZSBwcmlvciB0byBjb21tZW5jZW1lbnQgb2Ygc2VydmljZXMuIElmIHBheW1lbnQgaXMgbm90IHJlY2VpdmVkIHdpdGhpbiBzZXZlbiAoNykgZGF5cyBvZiB0aGUgQWdyZWVtZW50IGRhdGUsIFNlcnZpY2UgUHJvdmlkZXIgcmVzZXJ2ZXMgdGhlIHJpZ2h0IHRvIHN1c3BlbmQgYWxsIHNlcnZpY2VzIHVudGlsIHBheW1lbnQgaXMgcmVjZWl2ZWQuIEFsbCBmZWVzIGFyZSBub24tcmVmdW5kYWJsZSBvbmNlIHdvcmsgaGFzIGNvbW1lbmNlZC4gTGF0ZSBwYXltZW50cyBzaGFsbCBhY2NydWUgaW50ZXJlc3QgYXQgYSByYXRlIG9mIDEuNSUgcGVyIG1vbnRoLmApLAoKICAgIHNlY3Rpb25UaXRsZSgiNCIsICJEZWxpdmVyYWJsZSBBY2NlcHRhbmNlIiksCiAgICBib2R5VGV4dCgiVXBvbiBkZWxpdmVyeSBvZiBhbnkgd29yayBwcm9kdWN0LCBDbGllbnQgc2hhbGwgaGF2ZSBmb3VyICg0KSBidXNpbmVzcyBkYXlzIHRvIHJldmlldyBhbmQgcHJvdmlkZSB3cml0dGVuIG9iamVjdGlvbi4gSWYgbm8gd3JpdHRlbiBvYmplY3Rpb24gaXMgcmVjZWl2ZWQgd2l0aGluIHRoaXMgcGVyaW9kLCBkZWxpdmVyYWJsZXMgc2hhbGwgYmUgZGVlbWVkIGFjY2VwdGVkLiBUaGlzIGFjY2VwdGFuY2UgdGltZWxpbmUgaXMgY3JpdGljYWwgdG8gbWFpbnRhaW5pbmcgdGhlIFNwcmludCBzY2hlZHVsZS4iKSwKCiAgICBzZWN0aW9uVGl0bGUoIjUiLCAiSW50ZWxsZWN0dWFsIFByb3BlcnR5IiksCiAgICBib2R5VGV4dCgiQWxsIHdvcmsgcHJvZHVjdCBjcmVhdGVkIGJ5IFNlcnZpY2UgUHJvdmlkZXIgaW4gdGhlIHBlcmZvcm1hbmNlIG9mIHRoaXMgQWdyZWVtZW50IHNoYWxsIGJlY29tZSB0aGUgcHJvcGVydHkgb2YgQ2xpZW50IHVwb24gcmVjZWlwdCBvZiBmdWxsIHBheW1lbnQuIFVudGlsIGZ1bGwgcGF5bWVudCBpcyByZWNlaXZlZCwgYWxsIGludGVsbGVjdHVhbCBwcm9wZXJ0eSByaWdodHMgcmVtYWluIGV4Y2x1c2l2ZWx5IHdpdGggU2VydmljZSBQcm92aWRlci4gU2VydmljZSBQcm92aWRlciByZXRhaW5zIHRoZSByaWdodCB0byB1c2UgZ2VuZXJhbCBrbm93bGVkZ2UsIHNraWxscywgYW5kIGV4cGVyaWVuY2UgZ2FpbmVkIGR1cmluZyB0aGUgZW5nYWdlbWVudCwgYXMgd2VsbCBhcyBhbnkgdG9vbHMsIGZyYW1ld29ya3MsIG9yIG1ldGhvZG9sb2dpZXMgdGhhdCBleGlzdGVkIHByaW9yIHRvIG9yIHdlcmUgZGV2ZWxvcGVkIGluZGVwZW5kZW50bHkgb2YgdGhpcyBBZ3JlZW1lbnQuIiksCgogICAgc2VjdGlvblRpdGxlKCI2IiwgIkNvbmZpZGVudGlhbGl0eSIpLAogICAgYm9keVRleHQoIkVhY2ggcGFydHkgYWdyZWVzIHRvIG1haW50YWluIHRoZSBjb25maWRlbnRpYWxpdHkgb2YgYW55IHByb3ByaWV0YXJ5IG9yIGNvbmZpZGVudGlhbCBpbmZvcm1hdGlvbiBkaXNjbG9zZWQgYnkgdGhlIG90aGVyIHBhcnR5IGR1cmluZyB0aGUgdGVybSBvZiB0aGlzIEFncmVlbWVudC4gVGhpcyBvYmxpZ2F0aW9uIHNoYWxsIHN1cnZpdmUgdGVybWluYXRpb24gZm9yIGEgcGVyaW9kIG9mIHR3byAoMikgeWVhcnMuIENvbmZpZGVudGlhbCBpbmZvcm1hdGlvbiBkb2VzIG5vdCBpbmNsdWRlIGluZm9ybWF0aW9uIHRoYXQ6IChhKSBpcyBvciBiZWNvbWVzIHB1YmxpY2x5IGF2YWlsYWJsZSB0aHJvdWdoIG5vIGZhdWx0IG9mIHRoZSByZWNlaXZpbmcgcGFydHk7IChiKSB3YXMga25vd24gdG8gdGhlIHJlY2VpdmluZyBwYXJ0eSBwcmlvciB0byBkaXNjbG9zdXJlOyAoYykgaXMgaW5kZXBlbmRlbnRseSBkZXZlbG9wZWQgYnkgdGhlIHJlY2VpdmluZyBwYXJ0eTsgb3IgKGQpIGlzIGRpc2Nsb3NlZCB3aXRoIHRoZSBwcmlvciB3cml0dGVuIGNvbnNlbnQgb2YgdGhlIGRpc2Nsb3NpbmcgcGFydHkuIiksCgogICAgc2VjdGlvblRpdGxlKCI3IiwgIk5vbi1Tb2xpY2l0YXRpb24iKSwKICAgIGJvZHlUZXh0KCJEdXJpbmcgdGhlIHRlcm0gb2YgdGhpcyBBZ3JlZW1lbnQgYW5kIGZvciB0d2VsdmUgKDEyKSBtb250aHMgZm9sbG93aW5nIGl0cyB0ZXJtaW5hdGlvbiwgQ2xpZW50IHNoYWxsIG5vdCBkaXJlY3RseSBvciBpbmRpcmVjdGx5IHNvbGljaXQsIHJlY3J1aXQsIG9yIGhpcmUgYW55IGVtcGxveWVlLCBjb250cmFjdG9yLCBvciBjb25zdWx0YW50IG9mIFNlcnZpY2UgUHJvdmlkZXIgd2hvIHdhcyBpbnZvbHZlZCBpbiBwZXJmb3JtaW5nIHNlcnZpY2VzIHVuZGVyIHRoaXMgQWdyZWVtZW50LiIpLAoKICAgIHNlY3Rpb25UaXRsZSgiOCIsICJMaW1pdGF0aW9uIG9mIExpYWJpbGl0eSIpLAogICAgYm9keVRleHQoIkluIG5vIGV2ZW50IHNoYWxsIGVpdGhlciBwYXJ0eSBiZSBsaWFibGUgdG8gdGhlIG90aGVyIGZvciBhbnkgaW5kaXJlY3QsIGluY2lkZW50YWwsIHNwZWNpYWwsIGNvbnNlcXVlbnRpYWwsIG9yIHB1bml0aXZlIGRhbWFnZXMsIHJlZ2FyZGxlc3Mgb2YgdGhlIGNhdXNlIG9mIGFjdGlvbiBvciB0aGUgdGhlb3J5IG9mIGxpYWJpbGl0eS4gU2VydmljZSBQcm92aWRlclx1MjAxOXMgdG90YWwgYWdncmVnYXRlIGxpYWJpbGl0eSB1bmRlciB0aGlzIEFncmVlbWVudCBzaGFsbCBub3QgZXhjZWVkIHRoZSB0b3RhbCBmZWVzIHBhaWQgYnkgQ2xpZW50IHVuZGVyIHRoaXMgQWdyZWVtZW50LiIpLAoKICAgIHNlY3Rpb25UaXRsZSgiOSIsICJUZXJtaW5hdGlvbiIpLAogICAgYm9keVRleHQoIkVpdGhlciBwYXJ0eSBtYXkgdGVybWluYXRlIHRoaXMgQWdyZWVtZW50IHdpdGggdGhpcnR5ICgzMCkgZGF5cyB3cml0dGVuIG5vdGljZS4gSW4gdGhlIGV2ZW50IG9mIHRlcm1pbmF0aW9uLCBDbGllbnQgc2hhbGwgcGF5IGZvciBhbGwgc2VydmljZXMgcmVuZGVyZWQgdGhyb3VnaCB0aGUgZGF0ZSBvZiB0ZXJtaW5hdGlvbi4gQWxsIGZlZXMgcGFpZCBwcmlvciB0byB0ZXJtaW5hdGlvbiBhcmUgbm9uLXJlZnVuZGFibGUgb25jZSB3b3JrIGhhcyBjb21tZW5jZWQuIFNlcnZpY2UgUHJvdmlkZXIgbWF5IHRlcm1pbmF0ZSB0aGlzIEFncmVlbWVudCBpbW1lZGlhdGVseSBpZiBDbGllbnQgZmFpbHMgdG8gbWFrZSBwYXltZW50IHdpdGhpbiBzZXZlbiAoNykgZGF5cyBvZiB0aGUgZHVlIGRhdGUuIiksCgogICAgc2VjdGlvblRpdGxlKCIxMCIsICJJbmRlbW5pZmljYXRpb24iKSwKICAgIGJvZHlUZXh0KCJFYWNoIHBhcnR5IHNoYWxsIGluZGVtbmlmeSBhbmQgaG9sZCBoYXJtbGVzcyB0aGUgb3RoZXIgcGFydHkgZnJvbSBhbnkgdGhpcmQtcGFydHkgY2xhaW1zLCBkYW1hZ2VzLCBvciBleHBlbnNlcyBhcmlzaW5nIGZyb20gdGhlIGluZGVtbmlmeWluZyBwYXJ0eVx1MjAxOXMgYnJlYWNoIG9mIHRoaXMgQWdyZWVtZW50IG9yIG5lZ2xpZ2VudCBhY3RzLiIpLAoKICAgIHNlY3Rpb25UaXRsZSgiMTEiLCAiRm9yY2UgTWFqZXVyZSIpLAogICAgYm9keVRleHQoIk5laXRoZXIgcGFydHkgc2hhbGwgYmUgbGlhYmxlIGZvciBhbnkgZmFpbHVyZSBvciBkZWxheSBpbiBwZXJmb3JtYW5jZSB1bmRlciB0aGlzIEFncmVlbWVudCBkdWUgdG8gY2lyY3Vtc3RhbmNlcyBiZXlvbmQgaXRzIHJlYXNvbmFibGUgY29udHJvbCwgaW5jbHVkaW5nIGJ1dCBub3QgbGltaXRlZCB0byBhY3RzIG9mIEdvZCwgbmF0dXJhbCBkaXNhc3RlcnMsIHBhbmRlbWljLCBnb3Zlcm5tZW50IGFjdGlvbnMsIHdhciwgdGVycm9yaXNtLCBsYWJvciBkaXNwdXRlcywgcG93ZXIgZmFpbHVyZXMsIGludGVybmV0IGRpc3J1cHRpb25zLCBvciB0aGlyZC1wYXJ0eSBzZXJ2aWNlIG91dGFnZXMuIFRoZSBhZmZlY3RlZCBwYXJ0eSBzaGFsbCBwcm92aWRlIHByb21wdCBub3RpY2UgYW5kIHVzZSByZWFzb25hYmxlIGVmZm9ydHMgdG8gbWl0aWdhdGUgdGhlIGltcGFjdC4iKSwKCiAgICBzZWN0aW9uVGl0bGUoIjEyIiwgIkdvdmVybmluZyBMYXcgJiBEaXNwdXRlIFJlc29sdXRpb24iKSwKICAgIGJvZHlUZXh0KCJUaGlzIEFncmVlbWVudCBzaGFsbCBiZSBnb3Zlcm5lZCBieSBhbmQgY29uc3RydWVkIGluIGFjY29yZGFuY2Ugd2l0aCB0aGUgbGF3cyBvZiB0aGUgU3RhdGUgb2YgV3lvbWluZy4gQW55IGRpc3B1dGVzIGFyaXNpbmcgdW5kZXIgdGhpcyBBZ3JlZW1lbnQgc2hhbGwgYmUgcmVzb2x2ZWQgdGhyb3VnaCBiaW5kaW5nIGFyYml0cmF0aW9uIGluIHRoZSBTdGF0ZSBvZiBXeW9taW5nLCBpbiBhY2NvcmRhbmNlIHdpdGggdGhlIHJ1bGVzIG9mIHRoZSBBbWVyaWNhbiBBcmJpdHJhdGlvbiBBc3NvY2lhdGlvbi4gVGhlIHByZXZhaWxpbmcgcGFydHkgc2hhbGwgYmUgZW50aXRsZWQgdG8gcmVjb3ZlciByZWFzb25hYmxlIGF0dG9ybmV5c1x1MjAxOSBmZWVzIGFuZCBjb3N0cy4iKSwKCiAgICBzZWN0aW9uVGl0bGUoIjEzIiwgIkdlbmVyYWwgUHJvdmlzaW9ucyIpLAogICAgYm9keVRleHQoIlRoaXMgQWdyZWVtZW50IGNvbnN0aXR1dGVzIHRoZSBlbnRpcmUgYWdyZWVtZW50IGJldHdlZW4gdGhlIHBhcnRpZXMgYW5kIHN1cGVyc2VkZXMgYWxsIHByaW9yIG5lZ290aWF0aW9ucywgcmVwcmVzZW50YXRpb25zLCBvciBhZ3JlZW1lbnRzIHJlbGF0aW5nIHRvIHRoZSBzdWJqZWN0IG1hdHRlciBoZXJlb2YuIFRoaXMgQWdyZWVtZW50IG1heSBub3QgYmUgYW1lbmRlZCBleGNlcHQgYnkgd3JpdHRlbiBpbnN0cnVtZW50IHNpZ25lZCBieSBib3RoIHBhcnRpZXMuIElmIGFueSBwcm92aXNpb24gb2YgdGhpcyBBZ3JlZW1lbnQgaXMgaGVsZCB0byBiZSB1bmVuZm9yY2VhYmxlLCB0aGUgcmVtYWluaW5nIHByb3Zpc2lvbnMgc2hhbGwgcmVtYWluIGluIGZ1bGwgZm9yY2UgYW5kIGVmZmVjdC4iKSwKCiAgICBuZXcgUGFyYWdyYXBoKHsgY2hpbGRyZW46IFtuZXcgUGFnZUJyZWFrKCldIH0pLAogICAgYmFubmVyKCJTVEFURU1FTlQgT0YgV09SSyIpLAoKICAgIGhlYWRpbmcoIlByb2plY3QgT3ZlcnZpZXciKSwKICAgIGJvZHlUZXh0KCJTZXJ2aWNlIFByb3ZpZGVyIHNoYWxsIGRlbGl2ZXIgYSBjb21wcmVoZW5zaXZlIEFuc3dlciBFbmdpbmUgT3B0aW1pemF0aW9uIHNwcmludCBmb3IgQ2xpZW50LCBmb2N1c2VkIG9uIGltcHJvdmluZyBDbGllbnRcdTIwMTlzIHZpc2liaWxpdHkgYW5kIHBlcmZvcm1hbmNlIGFjcm9zcyBBSS1wb3dlcmVkIGFuc3dlciBlbmdpbmVzIGFuZCBzZWFyY2ggcGxhdGZvcm1zLiIpLAoKICAgIGhlYWRpbmcoIkRlbGl2ZXJhYmxlIiksCiAgICBib2R5VGV4dChkZWxpdmVyYWJsZSB8fCAiQ29tcHJlaGVuc2l2ZSBBRU8gYXVkaXQsIGNvbnRlbnQgc3RyYXRlZ3ksIGFuZCBvcHRpbWl6YXRpb24gaW1wbGVtZW50YXRpb24uIiksCgogICAgaGVhZGluZygiVGltZWxpbmUiKSwKICAgIGJvZHlUZXh0KCJBbGwgZGVsaXZlcmFibGVzIHNoYWxsIGJlIGNvbXBsZXRlZCB3aXRoaW4gc2l4dHkgKDYwKSBjYWxlbmRhciBkYXlzIGZyb20gdGhlIGRhdGUgb2YgcGF5bWVudCByZWNlaXB0LiIpLAoKICAgIGhlYWRpbmcoIkludmVzdG1lbnQiKSwKICAgIGJvbGRCb2R5VGV4dCgiVG90YWwgU3ByaW50IEZlZTogICIsIGAkJHtmb3JtYXR0ZWRBbW91bnR9IFVTRGApLAogICAgYm9sZEJvZHlUZXh0KCJQYXltZW50IFRlcm1zOiAgIiwgIkR1ZSB1cG9uIGV4ZWN1dGlvbiwgcHJpb3IgdG8gY29tbWVuY2VtZW50IG9mIHNlcnZpY2VzLiIpLAogICAgYm9keVRleHQoIkFsbCBmZWVzIGFyZSBub24tcmVmdW5kYWJsZSBvbmNlIHdvcmsgaGFzIGNvbW1lbmNlZC4iKSwKCiAgICBuZXcgUGFyYWdyYXBoKHsgY2hpbGRyZW46IFtuZXcgUGFnZUJyZWFrKCldIH0pLAogICAgYmFubmVyKCJTSUdOQVRVUkVTIiksCiAgICBib2R5VGV4dCgiSU4gV0lUTkVTUyBXSEVSRU9GLCB0aGUgcGFydGllcyBoYXZlIGV4ZWN1dGVkIHRoaXMgQWdyZWVtZW50IGFzIG9mIHRoZSBkYXRlIGZpcnN0IHdyaXR0ZW4gYWJvdmUuIiksCgogICAgbmV3IFBhcmFncmFwaCh7CiAgICAgIHNwYWNpbmc6IHsgYmVmb3JlOiA0MDAsIGFmdGVyOiAxMDAgfSwKICAgICAgY2hpbGRyZW46IFtuZXcgVGV4dFJ1bih7IHRleHQ6ICJTRVJWSUNFIFBST1ZJREVSIiwgYm9sZDogdHJ1ZSwgZm9udDogRk9OVCwgc2l6ZTogMjEsIGNvbG9yOiBCTEFDSyB9KV0sCiAgICB9KSwKICAgIC4uLnNpZ25hdHVyZUJsb2NrKCJKZWZmcmV5IFBlcm91dGthIiwgIkNPTyIsICJBRU8gTGFicyBMTEMiLCB0cnVlLCBmb3JtYXR0ZWREYXRlKSwKCiAgICBuZXcgUGFyYWdyYXBoKHsKICAgICAgc3BhY2luZzogeyBiZWZvcmU6IDQwMCwgYWZ0ZXI6IDEwMCB9LAogICAgICBjaGlsZHJlbjogW25ldyBUZXh0UnVuKHsgdGV4dDogIkNMSUVOVCIsIGJvbGQ6IHRydWUsIGZvbnQ6IEZPTlQsIHNpemU6IDIxLCBjb2xvcjogQkxBQ0sgfSldLAogICAgfSksCiAgICAuLi5zaWduYXR1cmVCbG9jayhjbGllbnROYW1lLCBjbGllbnRUaXRsZSwgY2xpZW50Q29tcGFueSwgZmFsc2UsIGZvcm1hdHRlZERhdGUpLAogIF07Cn0KCmZ1bmN0aW9uIGJ1aWxkUGhhc2UyKGRhdGEpIHsKICBjb25zdCB7IGNsaWVudENvbXBhbnksIGNsaWVudEZpcnN0LCBjbGllbnRMYXN0LCBjbGllbnRUaXRsZSwgZm9ybWF0dGVkQW1vdW50LCBmb3JtYXR0ZWREYXRlLCBzY29wZSB9ID0gZGF0YTsKICBjb25zdCBjbGllbnROYW1lID0gYCR7Y2xpZW50Rmlyc3R9ICR7Y2xpZW50TGFzdH1gOwogIHJldHVybiBbCiAgICAuLi50aXRsZVBhZ2UoIlBoYXNlIDIgXHUyMDE0IE9uZ29pbmcgTW9udGhseSBSZXRhaW5lciIsIGNsaWVudENvbXBhbnksIGNsaWVudEZpcnN0LCBjbGllbnRMYXN0LCBjbGllbnRUaXRsZSwgZm9ybWF0dGVkRGF0ZSksCiAgICBuZXcgUGFyYWdyYXBoKHsgY2hpbGRyZW46IFtuZXcgUGFnZUJyZWFrKCldIH0pLAogICAgcGFydGllc0ludHJvKGNsaWVudENvbXBhbnksIGZvcm1hdHRlZERhdGUpLAogICAgYmFubmVyKCJNQVNURVIgU0VSVklDRVMgQUdSRUVNRU5UIiksCgogICAgc2VjdGlvblRpdGxlKCIxIiwgIlNlcnZpY2VzIiksCiAgICBib2R5VGV4dChgQUVPIExhYnMgTExDIChcdTIwMUNTZXJ2aWNlIFByb3ZpZGVyXHUyMDFEKSBhZ3JlZXMgdG8gcHJvdmlkZSBvbmdvaW5nIEFuc3dlciBFbmdpbmUgT3B0aW1pemF0aW9uIHNlcnZpY2VzIHRvICR7Y2xpZW50Q29tcGFueX0gKFx1MjAxQ0NsaWVudFx1MjAxRCkgYXMgZGVzY3JpYmVkIGluIHRoZSBTdGF0ZW1lbnQgb2YgV29yayBhdHRhY2hlZCBoZXJldG8uIFNlcnZpY2VzIHNoYWxsIG5vdCBjb21tZW5jZSB1bnRpbCBpbml0aWFsIHBheW1lbnQgaGFzIGJlZW4gcmVjZWl2ZWQgYnkgU2VydmljZSBQcm92aWRlci5gKSwKCiAgICBzZWN0aW9uVGl0bGUoIjIiLCAiVGVybSAmIFJlbmV3YWwiKSwKICAgIGJvZHlUZXh0KGBUaGlzIEFncmVlbWVudCBzaGFsbCBjb21tZW5jZSBvbiAke2Zvcm1hdHRlZERhdGV9IGFuZCBzaGFsbCBjb250aW51ZSBvbiBhIG1vbnRoLXRvLW1vbnRoIGJhc2lzLCBhdXRvbWF0aWNhbGx5IHJlbmV3aW5nIGF0IHRoZSBiZWdpbm5pbmcgb2YgZWFjaCBiaWxsaW5nIHBlcmlvZCwgdW5sZXNzIHRlcm1pbmF0ZWQgaW4gYWNjb3JkYW5jZSB3aXRoIFNlY3Rpb24gOS4gRWFjaCBiaWxsaW5nIHBlcmlvZCBiZWdpbnMgb24gdGhlIGZpcnN0IG9mIHRoZSBtb250aCBmb2xsb3dpbmcgdGhlIGNvbW1lbmNlbWVudCBkYXRlLmApLAoKICAgIHNlY3Rpb25UaXRsZSgiMyIsICJQYXltZW50IFRlcm1zIiksCiAgICBib2R5VGV4dChgQ2xpZW50IHNoYWxsIHBheSBTZXJ2aWNlIFByb3ZpZGVyIGEgbW9udGhseSByZXRhaW5lciBmZWUgb2YgJCR7Zm9ybWF0dGVkQW1vdW50fSBVU0QsIGR1ZSBvbiB0aGUgZmlyc3Qgb2YgZWFjaCBtb250aC4gVGhlIGluaXRpYWwgcGF5bWVudCBpcyBkdWUgdXBvbiBleGVjdXRpb24gb2YgdGhpcyBBZ3JlZW1lbnQuIElmIHBheW1lbnQgaXMgbm90IHJlY2VpdmVkIHdpdGhpbiBzZXZlbiAoNykgZGF5cyBvZiB0aGUgZHVlIGRhdGUsIFNlcnZpY2UgUHJvdmlkZXIgcmVzZXJ2ZXMgdGhlIHJpZ2h0IHRvIHN1c3BlbmQgYWxsIHNlcnZpY2VzIHVudGlsIHBheW1lbnQgaXMgcmVjZWl2ZWQuIExhdGUgcGF5bWVudHMgc2hhbGwgYWNjcnVlIGludGVyZXN0IGF0IGEgcmF0ZSBvZiAxLjUlIHBlciBtb250aC4gUmV0YWluZXIgZmVlcyBtYXkgYmUgYWRqdXN0ZWQgYnkgbXV0dWFsIHdyaXR0ZW4gYWdyZWVtZW50IGJldHdlZW4gYm90aCBwYXJ0aWVzLmApLAoKICAgIHNlY3Rpb25UaXRsZSgiNCIsICJEZWxpdmVyYWJsZSBBY2NlcHRhbmNlIiksCiAgICBib2R5VGV4dCgiVXBvbiBkZWxpdmVyeSBvZiBhbnkgd29yayBwcm9kdWN0LCBDbGllbnQgc2hhbGwgaGF2ZSBmb3VyICg0KSBidXNpbmVzcyBkYXlzIHRvIHJldmlldyBhbmQgcHJvdmlkZSB3cml0dGVuIG9iamVjdGlvbi4gSWYgbm8gd3JpdHRlbiBvYmplY3Rpb24gaXMgcmVjZWl2ZWQgd2l0aGluIHRoaXMgcGVyaW9kLCBkZWxpdmVyYWJsZXMgc2hhbGwgYmUgZGVlbWVkIGFjY2VwdGVkLiIpLAoKICAgIHNlY3Rpb25UaXRsZSgiNSIsICJJbnRlbGxlY3R1YWwgUHJvcGVydHkiKSwKICAgIGJvZHlUZXh0KCJBbGwgd29yayBwcm9kdWN0IGNyZWF0ZWQgYnkgU2VydmljZSBQcm92aWRlciBpbiB0aGUgcGVyZm9ybWFuY2Ugb2YgdGhpcyBBZ3JlZW1lbnQgc2hhbGwgYmVjb21lIHRoZSBwcm9wZXJ0eSBvZiBDbGllbnQgdXBvbiByZWNlaXB0IG9mIGZ1bGwgcGF5bWVudCBmb3IgdGhlIGFwcGxpY2FibGUgYmlsbGluZyBwZXJpb2QuIFVudGlsIGZ1bGwgcGF5bWVudCBpcyByZWNlaXZlZCwgYWxsIGludGVsbGVjdHVhbCBwcm9wZXJ0eSByaWdodHMgcmVtYWluIGV4Y2x1c2l2ZWx5IHdpdGggU2VydmljZSBQcm92aWRlci4gU2VydmljZSBQcm92aWRlciByZXRhaW5zIHRoZSByaWdodCB0byB1c2UgZ2VuZXJhbCBrbm93bGVkZ2UsIHNraWxscywgYW5kIGV4cGVyaWVuY2UgZ2FpbmVkIGR1cmluZyB0aGUgZW5nYWdlbWVudCwgYXMgd2VsbCBhcyBhbnkgdG9vbHMsIGZyYW1ld29ya3MsIG9yIG1ldGhvZG9sb2dpZXMgdGhhdCBleGlzdGVkIHByaW9yIHRvIG9yIHdlcmUgZGV2ZWxvcGVkIGluZGVwZW5kZW50bHkgb2YgdGhpcyBBZ3JlZW1lbnQuIiksCgogICAgc2VjdGlvblRpdGxlKCI2IiwgIkNvbmZpZGVudGlhbGl0eSIpLAogICAgYm9keVRleHQoIkVhY2ggcGFydHkgYWdyZWVzIHRvIG1haW50YWluIHRoZSBjb25maWRlbnRpYWxpdHkgb2YgYW55IHByb3ByaWV0YXJ5IG9yIGNvbmZpZGVudGlhbCBpbmZvcm1hdGlvbiBkaXNjbG9zZWQgYnkgdGhlIG90aGVyIHBhcnR5IGR1cmluZyB0aGUgdGVybSBvZiB0aGlzIEFncmVlbWVudC4gVGhpcyBvYmxpZ2F0aW9uIHNoYWxsIHN1cnZpdmUgdGVybWluYXRpb24gZm9yIGEgcGVyaW9kIG9mIHR3byAoMikgeWVhcnMuIENvbmZpZGVudGlhbCBpbmZvcm1hdGlvbiBkb2VzIG5vdCBpbmNsdWRlIGluZm9ybWF0aW9uIHRoYXQ6IChhKSBpcyBvciBiZWNvbWVzIHB1YmxpY2x5IGF2YWlsYWJsZSB0aHJvdWdoIG5vIGZhdWx0IG9mIHRoZSByZWNlaXZpbmcgcGFydHk7IChiKSB3YXMga25vd24gdG8gdGhlIHJlY2VpdmluZyBwYXJ0eSBwcmlvciB0byBkaXNjbG9zdXJlOyAoYykgaXMgaW5kZXBlbmRlbnRseSBkZXZlbG9wZWQgYnkgdGhlIHJlY2VpdmluZyBwYXJ0eTsgb3IgKGQpIGlzIGRpc2Nsb3NlZCB3aXRoIHRoZSBwcmlvciB3cml0dGVuIGNvbnNlbnQgb2YgdGhlIGRpc2Nsb3NpbmcgcGFydHkuIiksCgogICAgc2VjdGlvblRpdGxlKCI3IiwgIk5vbi1Tb2xpY2l0YXRpb24iKSwKICAgIGJvZHlUZXh0KCJEdXJpbmcgdGhlIHRlcm0gb2YgdGhpcyBBZ3JlZW1lbnQgYW5kIGZvciB0d2VsdmUgKDEyKSBtb250aHMgZm9sbG93aW5nIGl0cyB0ZXJtaW5hdGlvbiwgQ2xpZW50IHNoYWxsIG5vdCBkaXJlY3RseSBvciBpbmRpcmVjdGx5IHNvbGljaXQsIHJlY3J1aXQsIG9yIGhpcmUgYW55IGVtcGxveWVlLCBjb250cmFjdG9yLCBvciBjb25zdWx0YW50IG9mIFNlcnZpY2UgUHJvdmlkZXIgd2hvIHdhcyBpbnZvbHZlZCBpbiBwZXJmb3JtaW5nIHNlcnZpY2VzIHVuZGVyIHRoaXMgQWdyZWVtZW50LiIpLAoKICAgIHNlY3Rpb25UaXRsZSgiOCIsICJMaW1pdGF0aW9uIG9mIExpYWJpbGl0eSIpLAogICAgYm9keVRleHQoIkluIG5vIGV2ZW50IHNoYWxsIGVpdGhlciBwYXJ0eSBiZSBsaWFibGUgdG8gdGhlIG90aGVyIGZvciBhbnkgaW5kaXJlY3QsIGluY2lkZW50YWwsIHNwZWNpYWwsIGNvbnNlcXVlbnRpYWwsIG9yIHB1bml0aXZlIGRhbWFnZXMsIHJlZ2FyZGxlc3Mgb2YgdGhlIGNhdXNlIG9mIGFjdGlvbiBvciB0aGUgdGhlb3J5IG9mIGxpYWJpbGl0eS4gU2VydmljZSBQcm92aWRlclx1MjAxOXMgdG90YWwgYWdncmVnYXRlIGxpYWJpbGl0eSB1bmRlciB0aGlzIEFncmVlbWVudCBzaGFsbCBub3QgZXhjZWVkIHRoZSB0b3RhbCBmZWVzIHBhaWQgYnkgQ2xpZW50IGluIHRoZSB0aHJlZSAoMykgbW9udGhzIHByZWNlZGluZyB0aGUgY2xhaW0uIiksCgogICAgc2VjdGlvblRpdGxlKCI5IiwgIlRlcm1pbmF0aW9uIiksCiAgICBib2R5VGV4dCgiRWl0aGVyIHBhcnR5IG1heSB0ZXJtaW5hdGUgdGhpcyBBZ3JlZW1lbnQgd2l0aCB0aGlydHkgKDMwKSBkYXlzIHdyaXR0ZW4gbm90aWNlLCBlZmZlY3RpdmUgYXQgdGhlIGVuZCBvZiB0aGUgY3VycmVudCBiaWxsaW5nIHBlcmlvZC4gRmFpbHVyZSB0byBwcm92aWRlIHRoZSByZXF1aXJlZCB0aGlydHkgKDMwKSBkYXlzIHdyaXR0ZW4gbm90aWNlIHNoYWxsIHJlc3VsdCBpbiBhbiBlYXJseSB0ZXJtaW5hdGlvbiBmZWUgb2YgJDUsMDAwIFVTRCwgcGF5YWJsZSBpbW1lZGlhdGVseS4gQ2xpZW50IHNoYWxsIHBheSBmb3IgYWxsIHNlcnZpY2VzIHJlbmRlcmVkIHRocm91Z2ggdGhlIGVmZmVjdGl2ZSBkYXRlIG9mIHRlcm1pbmF0aW9uLiBTZXJ2aWNlIFByb3ZpZGVyIG1heSB0ZXJtaW5hdGUgdGhpcyBBZ3JlZW1lbnQgaW1tZWRpYXRlbHkgaWYgQ2xpZW50IGZhaWxzIHRvIG1ha2UgcGF5bWVudCB3aXRoaW4gc2V2ZW4gKDcpIGRheXMgb2YgdGhlIGR1ZSBkYXRlLiIpLAoKICAgIHNlY3Rpb25UaXRsZSgiMTAiLCAiSW5kZW1uaWZpY2F0aW9uIiksCiAgICBib2R5VGV4dCgiRWFjaCBwYXJ0eSBzaGFsbCBpbmRlbW5pZnkgYW5kIGhvbGQgaGFybWxlc3MgdGhlIG90aGVyIHBhcnR5IGZyb20gYW55IHRoaXJkLXBhcnR5IGNsYWltcywgZGFtYWdlcywgb3IgZXhwZW5zZXMgYXJpc2luZyBmcm9tIHRoZSBpbmRlbW5pZnlpbmcgcGFydHlcdTIwMTlzIGJyZWFjaCBvZiB0aGlzIEFncmVlbWVudCBvciBuZWdsaWdlbnQgYWN0cy4iKSwKCiAgICBzZWN0aW9uVGl0bGUoIjExIiwgIkZvcmNlIE1hamV1cmUiKSwKICAgIGJvZHlUZXh0KCJOZWl0aGVyIHBhcnR5IHNoYWxsIGJlIGxpYWJsZSBmb3IgYW55IGZhaWx1cmUgb3IgZGVsYXkgaW4gcGVyZm9ybWFuY2UgdW5kZXIgdGhpcyBBZ3JlZW1lbnQgZHVlIHRvIGNpcmN1bXN0YW5jZXMgYmV5b25kIGl0cyByZWFzb25hYmxlIGNvbnRyb2wsIGluY2x1ZGluZyBidXQgbm90IGxpbWl0ZWQgdG8gYWN0cyBvZiBHb2QsIG5hdHVyYWwgZGlzYXN0ZXJzLCBwYW5kZW1pYywgZ292ZXJubWVudCBhY3Rpb25zLCB3YXIsIHRlcnJvcmlzbSwgbGFib3IgZGlzcHV0ZXMsIHBvd2VyIGZhaWx1cmVzLCBpbnRlcm5ldCBkaXNydXB0aW9ucywgb3IgdGhpcmQtcGFydHkgc2VydmljZSBvdXRhZ2VzLiBUaGUgYWZmZWN0ZWQgcGFydHkgc2hhbGwgcHJvdmlkZSBwcm9tcHQgbm90aWNlIGFuZCB1c2UgcmVhc29uYWJsZSBlZmZvcnRzIHRvIG1pdGlnYXRlIHRoZSBpbXBhY3QuIiksCgogICAgc2VjdGlvblRpdGxlKCIxMiIsICJSZXBvcnRpbmciKSwKICAgIGJvZHlUZXh0KCJTZXJ2aWNlIFByb3ZpZGVyIHNoYWxsIGRlbGl2ZXIgbW9udGhseSBwZXJmb3JtYW5jZSByZXBvcnRzIHRvIENsaWVudCwgc3VtbWFyaXppbmcgd29yayBjb21wbGV0ZWQsIGtleSBtZXRyaWNzLCBhbmQgcmVjb21tZW5kYXRpb25zIGZvciB0aGUgdXBjb21pbmcgcGVyaW9kLiIpLAoKICAgIHNlY3Rpb25UaXRsZSgiMTMiLCAiR292ZXJuaW5nIExhdyAmIERpc3B1dGUgUmVzb2x1dGlvbiIpLAogICAgYm9keVRleHQoIlRoaXMgQWdyZWVtZW50IHNoYWxsIGJlIGdvdmVybmVkIGJ5IGFuZCBjb25zdHJ1ZWQgaW4gYWNjb3JkYW5jZSB3aXRoIHRoZSBsYXdzIG9mIHRoZSBTdGF0ZSBvZiBXeW9taW5nLiBBbnkgZGlzcHV0ZXMgYXJpc2luZyB1bmRlciB0aGlzIEFncmVlbWVudCBzaGFsbCBiZSByZXNvbHZlZCB0aHJvdWdoIGJpbmRpbmcgYXJiaXRyYXRpb24gaW4gdGhlIFN0YXRlIG9mIFd5b21pbmcsIGluIGFjY29yZGFuY2Ugd2l0aCB0aGUgcnVsZXMgb2YgdGhlIEFtZXJpY2FuIEFyYml0cmF0aW9uIEFzc29jaWF0aW9uLiBUaGUgcHJldmFpbGluZyBwYXJ0eSBzaGFsbCBiZSBlbnRpdGxlZCB0byByZWNvdmVyIHJlYXNvbmFibGUgYXR0b3JuZXlzXHUyMDE5IGZlZXMgYW5kIGNvc3RzLiIpLAoKICAgIHNlY3Rpb25UaXRsZSgiMTQiLCAiR2VuZXJhbCBQcm92aXNpb25zIiksCiAgICBib2R5VGV4dCgiVGhpcyBBZ3JlZW1lbnQgY29uc3RpdHV0ZXMgdGhlIGVudGlyZSBhZ3JlZW1lbnQgYmV0d2VlbiB0aGUgcGFydGllcyBhbmQgc3VwZXJzZWRlcyBhbGwgcHJpb3IgbmVnb3RpYXRpb25zLCByZXByZXNlbnRhdGlvbnMsIG9yIGFncmVlbWVudHMgcmVsYXRpbmcgdG8gdGhlIHN1YmplY3QgbWF0dGVyIGhlcmVvZi4gVGhpcyBBZ3JlZW1lbnQgbWF5IG5vdCBiZSBhbWVuZGVkIGV4Y2VwdCBieSB3cml0dGVuIGluc3RydW1lbnQgc2lnbmVkIGJ5IGJvdGggcGFydGllcy4gSWYgYW55IHByb3Zpc2lvbiBvZiB0aGlzIEFncmVlbWVudCBpcyBoZWxkIHRvIGJlIHVuZW5mb3JjZWFibGUsIHRoZSByZW1haW5pbmcgcHJvdmlzaW9ucyBzaGFsbCByZW1haW4gaW4gZnVsbCBmb3JjZSBhbmQgZWZmZWN0LiIpLAoKICAgIG5ldyBQYXJhZ3JhcGgoeyBjaGlsZHJlbjogW25ldyBQYWdlQnJlYWsoKV0gfSksCiAgICBiYW5uZXIoIlNUQVRFTUVOVCBPRiBXT1JLIiksCgogICAgaGVhZGluZygiUHJvamVjdCBPdmVydmlldyIpLAogICAgYm9keVRleHQoIlNlcnZpY2UgUHJvdmlkZXIgc2hhbGwgZGVsaXZlciBvbmdvaW5nIEFuc3dlciBFbmdpbmUgT3B0aW1pemF0aW9uIHNlcnZpY2VzIGZvciBDbGllbnQsIGluY2x1ZGluZyBjb250aW51b3VzIHN0cmF0ZWd5LCBvcHRpbWl6YXRpb24sIGFuZCBwZXJmb3JtYW5jZSBtb25pdG9yaW5nIGFjcm9zcyBBSS1wb3dlcmVkIGFuc3dlciBlbmdpbmVzIGFuZCBzZWFyY2ggcGxhdGZvcm1zLiIpLAoKICAgIGhlYWRpbmcoIlNjb3BlIG9mIFNlcnZpY2VzIiksCiAgICBib2R5VGV4dChzY29wZSB8fCAiQXMgbXV0dWFsbHkgYWdyZWVkIHVwb24gYnkgYm90aCBwYXJ0aWVzLiIpLAoKICAgIGhlYWRpbmcoIlJlcG9ydGluZyIpLAogICAgYm9keVRleHQoIk1vbnRobHkgcGVyZm9ybWFuY2UgcmVwb3J0cyB3aWxsIGJlIGRlbGl2ZXJlZCBzdW1tYXJpemluZyB3b3JrIGNvbXBsZXRlZCwga2V5IG1ldHJpY3MsIGFuZCBzdHJhdGVnaWMgcmVjb21tZW5kYXRpb25zLiIpLAoKICAgIGhlYWRpbmcoIkludmVzdG1lbnQiKSwKICAgIGJvbGRCb2R5VGV4dCgiTW9udGhseSBSZXRhaW5lcjogICIsIGAkJHtmb3JtYXR0ZWRBbW91bnR9IFVTRGApLAogICAgYm9sZEJvZHlUZXh0KCJQYXltZW50IER1ZTogICIsICJGaXJzdCBvZiBlYWNoIG1vbnRoIiksCiAgICBib2xkQm9keVRleHQoIkluaXRpYWwgUGF5bWVudDogICIsICJEdWUgdXBvbiBleGVjdXRpb24gb2YgdGhpcyBBZ3JlZW1lbnQiKSwKCiAgICBuZXcgUGFyYWdyYXBoKHsgY2hpbGRyZW46IFtuZXcgUGFnZUJyZWFrKCldIH0pLAogICAgYmFubmVyKCJTSUdOQVRVUkVTIiksCiAgICBib2R5VGV4dCgiSU4gV0lUTkVTUyBXSEVSRU9GLCB0aGUgcGFydGllcyBoYXZlIGV4ZWN1dGVkIHRoaXMgQWdyZWVtZW50IGFzIG9mIHRoZSBkYXRlIGZpcnN0IHdyaXR0ZW4gYWJvdmUuIiksCgogICAgbmV3IFBhcmFncmFwaCh7CiAgICAgIHNwYWNpbmc6IHsgYmVmb3JlOiA0MDAsIGFmdGVyOiAxMDAgfSwKICAgICAgY2hpbGRyZW46IFtuZXcgVGV4dFJ1bih7IHRleHQ6ICJTRVJWSUNFIFBST1ZJREVSIiwgYm9sZDogdHJ1ZSwgZm9udDogRk9OVCwgc2l6ZTogMjEsIGNvbG9yOiBCTEFDSyB9KV0sCiAgICB9KSwKICAgIC4uLnNpZ25hdHVyZUJsb2NrKCJKZWZmcmV5IFBlcm91dGthIiwgIkNPTyIsICJBRU8gTGFicyBMTEMiLCB0cnVlLCBmb3JtYXR0ZWREYXRlKSwKCiAgICBuZXcgUGFyYWdyYXBoKHsKICAgICAgc3BhY2luZzogeyBiZWZvcmU6IDQwMCwgYWZ0ZXI6IDEwMCB9LAogICAgICBjaGlsZHJlbjogW25ldyBUZXh0UnVuKHsgdGV4dDogIkNMSUVOVCIsIGJvbGQ6IHRydWUsIGZvbnQ6IEZPTlQsIHNpemU6IDIxLCBjb2xvcjogQkxBQ0sgfSldLAogICAgfSksCiAgICAuLi5zaWduYXR1cmVCbG9jayhjbGllbnROYW1lLCBjbGllbnRUaXRsZSwgY2xpZW50Q29tcGFueSwgZmFsc2UsIGZvcm1hdHRlZERhdGUpLAogIF07Cn0KCmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlQ29udHJhY3QoZGF0YSkgewogIGNvbnN0IGNoaWxkcmVuID0gZGF0YS5jb250cmFjdFR5cGUgPT09ICJwaGFzZTIiID8gYnVpbGRQaGFzZTIoZGF0YSkgOiBidWlsZFNwcmludDEoZGF0YSk7CgogIGNvbnN0IGRvYyA9IG5ldyBEb2N1bWVudCh7CiAgICBzdHlsZXM6IHsKICAgICAgZGVmYXVsdDogeyBkb2N1bWVudDogeyBydW46IHsgZm9udDogRk9OVCwgc2l6ZTogMjAgfSB9IH0sCiAgICB9LAogICAgc2VjdGlvbnM6IFt7CiAgICAgIHByb3BlcnRpZXM6IHsKICAgICAgICBwYWdlOiB7CiAgICAgICAgICBzaXplOiB7IHdpZHRoOiAxMjI0MCwgaGVpZ2h0OiAxNTg0MCB9LAogICAgICAgICAgbWFyZ2luOiB7IHRvcDogMTQ0MCwgcmlnaHQ6IDE0NDAsIGJvdHRvbTogMTQ0MCwgbGVmdDogMTQ0MCB9LAogICAgICAgIH0sCiAgICAgIH0sCiAgICAgIGhlYWRlcnM6IHsKICAgICAgICBkZWZhdWx0OiBuZXcgSGVhZGVyKHsKICAgICAgICAgIGNoaWxkcmVuOiBbCiAgICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoewogICAgICAgICAgICAgIGFsaWdubWVudDogQWxpZ25tZW50VHlwZS5SSUdIVCwKICAgICAgICAgICAgICBjaGlsZHJlbjogWwogICAgICAgICAgICAgICAgbmV3IFRleHRSdW4oeyB0ZXh0OiAiQUVPIExhYnMgTExDIiwgZm9udDogRk9OVCwgc2l6ZTogMTUsIGNvbG9yOiBMSUdIVF9HUkFZLCBpdGFsaWNzOiB0cnVlIH0pLAogICAgICAgICAgICAgICAgbmV3IFRleHRSdW4oeyB0ZXh0OiAiICB8ICAiLCBmb250OiBGT05ULCBzaXplOiAxNSwgY29sb3I6IExJR0hUX0dSQVkgfSksCiAgICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7IHRleHQ6ICJDb25maWRlbnRpYWwiLCBmb250OiBGT05ULCBzaXplOiAxNSwgY29sb3I6IExJR0hUX0dSQVksIGl0YWxpY3M6IHRydWUgfSksCiAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgfSksCiAgICAgICAgICBdLAogICAgICAgIH0pLAogICAgICB9LAogICAgICBmb290ZXJzOiB7CiAgICAgICAgZGVmYXVsdDogbmV3IEZvb3Rlcih7CiAgICAgICAgICBjaGlsZHJlbjogWwogICAgICAgICAgICBuZXcgUGFyYWdyYXBoKHsKICAgICAgICAgICAgICBhbGlnbm1lbnQ6IEFsaWdubWVudFR5cGUuQ0VOVEVSLAogICAgICAgICAgICAgIGNoaWxkcmVuOiBbCiAgICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7IHRleHQ6ICJQYWdlICIsIGZvbnQ6IEZPTlQsIHNpemU6IDE1LCBjb2xvcjogTElHSFRfR1JBWSB9KSwKICAgICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHsgY2hpbGRyZW46IFtQYWdlTnVtYmVyLkNVUlJFTlRdLCBmb250OiBGT05ULCBzaXplOiAxNSwgY29sb3I6IExJR0hUX0dSQVkgfSksCiAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgfSksCiAgICAgICAgICBdLAogICAgICAgIH0pLAogICAgICB9LAogICAgICBjaGlsZHJlbiwKICAgIH1dLAogIH0pOwoKICByZXR1cm4gYXdhaXQgUGFja2VyLnRvQnVmZmVyKGRvYyk7Cn0KCi8vIMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkMOiwpXCkAovLyBBUEkgSEFORExFUgovLyDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpDDosKVwpAKCgoKLy8gPT09PT09PT09PT09PT09PT09PT0gU1RSSVBFIElOVEVHUkFUSU9OID09PT09PT09PT09PT09PT09PT09CmZ1bmN0aW9uIHN0cmlwZVJlcXVlc3QobWV0aG9kLCBwYXRoLCBmb3JtRGF0YSkgewogIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICBjb25zdCBzdHJpcGVLZXkgPSBwcm9jZXNzLmVudi5TVFJJUEVfU0VDUkVUX0tFWTsKICAgIGlmICghc3RyaXBlS2V5KSByZXR1cm4gcmVqZWN0KG5ldyBFcnJvcigiU1RSSVBFX1NFQ1JFVF9LRVkgbm90IHNldCIpKTsKICAgIGNvbnN0IGVuY29kZWQgPSBCdWZmZXIuZnJvbShmb3JtRGF0YSkudG9TdHJpbmcoKTsKICAgIGNvbnN0IG9wdGlvbnMgPSB7CiAgICAgIGhvc3RuYW1lOiAiYXBpLnN0cmlwZS5jb20iLAogICAgICBwb3J0OiA0NDMsCiAgICAgIHBhdGg6ICIvdjEiICsgcGF0aCwKICAgICAgbWV0aG9kOiBtZXRob2QsCiAgICAgIGhlYWRlcnM6IHsKICAgICAgICAiQXV0aG9yaXphdGlvbiI6ICJCYXNpYyAiICsgQnVmZmVyLmZyb20oc3RyaXBlS2V5ICsgIjoiKS50b1N0cmluZygiYmFzZTY0IiksCiAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiLAogICAgICAgICJDb250ZW50LUxlbmd0aCI6IEJ1ZmZlci5ieXRlTGVuZ3RoKGZvcm1EYXRhKQogICAgICB9CiAgICB9OwogICAgY29uc3QgcmVxID0gaHR0cHMucmVxdWVzdChvcHRpb25zLCAocmVzKSA9PiB7CiAgICAgIGxldCBkYXRhID0gIiI7CiAgICAgIHJlcy5vbigiZGF0YSIsIChjaHVuaykgPT4gZGF0YSArPSBjaHVuayk7CiAgICAgIHJlcy5vbigiZW5kIiwgKCkgPT4gewogICAgICAgIHRyeSB7IHJlc29sdmUoSlNPTi5wYXJzZShkYXRhKSk7IH0KICAgICAgICBjYXRjaChlKSB7IHJlamVjdChuZXcgRXJyb3IoIlN0cmlwZSBwYXJzZSBlcnJvcjogIiArIGRhdGEuc3Vic3RyaW5nKDAsIDIwMCkpKTsgfQogICAgICB9KTsKICAgIH0pOwogICAgcmVxLm9uKCJlcnJvciIsIHJlamVjdCk7CiAgICByZXEud3JpdGUoZm9ybURhdGEpOwogICAgcmVxLmVuZCgpOwogIH0pOwp9Cgphc3luYyBmdW5jdGlvbiBjcmVhdGVTdHJpcGVJbnZvaWNlKGNsaWVudEVtYWlsLCBjbGllbnROYW1lLCBjbGllbnRDb21wYW55LCBhbW91bnRDZW50cywgZGVzY3JpcHRpb24pIHsKICBjb25zb2xlLmxvZygiU1RSSVBFOiBDcmVhdGluZyBjdXN0b21lciBmb3IgIiArIGNsaWVudEVtYWlsKTsKICAvLyBDcmVhdGUgb3IgZmluZCBjdXN0b21lcgogIGNvbnN0IGN1c3RvbWVyID0gYXdhaXQgc3RyaXBlUmVxdWVzdCgiUE9TVCIsICIvY3VzdG9tZXJzIiwgCiAgICAiZW1haWw9IiArIGVuY29kZVVSSUNvbXBvbmVudChjbGllbnRFbWFpbCkgKyAiJm5hbWU9IiArIGVuY29kZVVSSUNvbXBvbmVudChjbGllbnROYW1lKSArICImbWV0YWRhdGFbY29tcGFueV09IiArIGVuY29kZVVSSUNvbXBvbmVudChjbGllbnRDb21wYW55KQogICk7CiAgY29uc29sZS5sb2coIlNUUklQRTogQ3VzdG9tZXIgY3JlYXRlZDogIiArIGN1c3RvbWVyLmlkKTsKICAKICAvLyBDcmVhdGUgaW52b2ljZQogIGNvbnNvbGUubG9nKCJTVFJJUEU6IENyZWF0aW5nIGludm9pY2UgZm9yICIgKyBhbW91bnRDZW50cyArICIgY2VudHMiKTsKICBjb25zdCBpbnZvaWNlID0gYXdhaXQgc3RyaXBlUmVxdWVzdCgiUE9TVCIsICIvaW52b2ljZXMiLAogICAgImN1c3RvbWVyPSIgKyBjdXN0b21lci5pZCArICImY29sbGVjdGlvbl9tZXRob2Q9c2VuZF9pbnZvaWNlJmRheXNfdW50aWxfZHVlPTMwJmF1dG9fYWR2YW5jZT10cnVlIgogICk7CiAgY29uc29sZS5sb2coIlNUUklQRTogSW52b2ljZSBjcmVhdGVkOiAiICsgaW52b2ljZS5pZCk7CiAgCiAgLy8gQWRkIGludm9pY2UgaXRlbQogIGF3YWl0IHN0cmlwZVJlcXVlc3QoIlBPU1QiLCAiL2ludm9pY2VpdGVtcyIsCiAgICAiY3VzdG9tZXI9IiArIGN1c3RvbWVyLmlkICsgIiZpbnZvaWNlPSIgKyBpbnZvaWNlLmlkICsgIiZhbW91bnQ9IiArIGFtb3VudENlbnRzICsgIiZjdXJyZW5jeT11c2QmZGVzY3JpcHRpb249IiArIGVuY29kZVVSSUNvbXBvbmVudChkZXNjcmlwdGlvbikKICApOwogIGNvbnNvbGUubG9nKCJTVFJJUEU6IEludm9pY2UgaXRlbSBhZGRlZCIpOwogIAogIC8vIEZpbmFsaXplIGludm9pY2UKICBjb25zdCBmaW5hbGl6ZWQgPSBhd2FpdCBzdHJpcGVSZXF1ZXN0KCJQT1NUIiwgIi9pbnZvaWNlcy8iICsgaW52b2ljZS5pZCArICIvZmluYWxpemUiLCAiIik7CiAgY29uc29sZS5sb2coIlNUUklQRTogSW52b2ljZSBmaW5hbGl6ZWQsIHN0YXR1czogIiArIGZpbmFsaXplZC5zdGF0dXMpOwogIAogIHJldHVybiB7IGN1c3RvbWVySWQ6IGN1c3RvbWVyLmlkLCBpbnZvaWNlSWQ6IGludm9pY2UuaWQsIGludm9pY2VVcmw6IGZpbmFsaXplZC5ob3N0ZWRfaW52b2ljZV91cmwsIGludm9pY2VQZGY6IGZpbmFsaXplZC5pbnZvaWNlX3BkZiB9Owp9CgovLyA9PT09PT09PT09PT09PT09PT09PSBDTElDS1VQIElOVEVHUkFUSU9OID09PT09PT09PT09PT09PT09PT09CmZ1bmN0aW9uIGNsaWNrdXBSZXF1ZXN0KG1ldGhvZCwgcGF0aCwgYm9keSkgewogIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICBjb25zdCB0b2tlbiA9IHByb2Nlc3MuZW52LkNMSUNLVVBfQVBJX1RPS0VOOwogICAgaWYgKCF0b2tlbikgcmV0dXJuIHJlamVjdChuZXcgRXJyb3IoIkNMSUNLVVBfQVBJX1RPS0VOIG5vdCBzZXQiKSk7CiAgICBjb25zb2xlLmxvZygiQ0xJQ0tVUDogVG9rZW4gcHJlZml4OiAiICsgKHRva2VuID8gdG9rZW4uc3Vic3RyaW5nKDAsIDUpICsgIi4uLiIgOiAiRU1QVFkiKSk7CiAgICBjb25zdCBib2R5U3RyID0gYm9keSA/IEpTT04uc3RyaW5naWZ5KGJvZHkpIDogIiI7CiAgICBjb25zdCBvcHRpb25zID0gewogICAgICBob3N0bmFtZTogImFwaS5jbGlja3VwLmNvbSIsCiAgICAgIHBvcnQ6IDQ0MywKICAgICAgcGF0aDogIi9hcGkvdjIiICsgcGF0aCwKICAgICAgbWV0aG9kOiBtZXRob2QsCiAgICAgIGhlYWRlcnM6IHsKICAgICAgICAiQXV0aG9yaXphdGlvbiI6IHRva2VuLAogICAgICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIKICAgICAgfQogICAgfTsKICAgIGlmIChib2R5U3RyKSBvcHRpb25zLmhlYWRlcnNbIkNvbnRlbnQtTGVuZ3RoIl0gPSBCdWZmZXIuYnl0ZUxlbmd0aChib2R5U3RyKTsKICAgIGNvbnN0IHJlcSA9IGh0dHBzLnJlcXVlc3Qob3B0aW9ucywgKHJlcykgPT4gewogICAgICBsZXQgZGF0YSA9ICIiOwogICAgICByZXMub24oImRhdGEiLCAoY2h1bmspID0+IGRhdGEgKz0gY2h1bmspOwogICAgICByZXMub24oImVuZCIsICgpID0+IHsKICAgICAgICB0cnkgeyByZXNvbHZlKEpTT04ucGFyc2UoZGF0YSkpOyB9CiAgICAgICAgY2F0Y2goZSkgeyByZWplY3QobmV3IEVycm9yKCJDbGlja1VwIHBhcnNlIGVycm9yOiAiICsgZGF0YS5zdWJzdHJpbmcoMCwgMjAwKSkpOyB9CiAgICAgIH0pOwogICAgfSk7CiAgICByZXEub24oImVycm9yIiwgcmVqZWN0KTsKICAgIGlmIChib2R5U3RyKSByZXEud3JpdGUoYm9keVN0cik7CiAgICByZXEuZW5kKCk7CiAgfSk7Cn0KCmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUNsaWNrVXBUYXNrKGNsaWVudENvbXBhbnksIGNvbnRyYWN0VHlwZSwgYW1vdW50LCBjbGllbnRFbWFpbCwgc2lnbk5vd0RvY0lkLCBzdHJpcGVJbnZvaWNlVXJsKSB7CiAgLy8gUG9zdCB0byB0aGUgQUVPIExhYnMgY29udHJhY3RzIGxpc3QKICAvLyBMaXN0IElEIGZvciBjb250cmFjdCB0YXNrcyAtIHVzaW5nIEFFTyBMYWJzIHdvcmtzcGFjZQogIGNvbnN0IGxpc3RJZCA9IHByb2Nlc3MuZW52LkNMSUNLVVBfTElTVF9JRCB8fCAiOTAxMzA3NDU4NzAyIjsKICBjb25zb2xlLmxvZygiQ0xJQ0tVUDogQ3JlYXRpbmcgdGFzayBpbiBsaXN0ICIgKyBsaXN0SWQpOwogIGNvbnN0IHRhc2sgPSBhd2FpdCBjbGlja3VwUmVxdWVzdCgiUE9TVCIsICIvbGlzdC8iICsgbGlzdElkICsgIi90YXNrIiwgewogICAgbmFtZTogIkNvbnRyYWN0OiAiICsgY2xpZW50Q29tcGFueSArICIgLSAiICsgY29udHJhY3RUeXBlLnRvVXBwZXJDYXNlKCksCiAgICBkZXNjcmlwdGlvbjogIk5ldyBjb250cmFjdCBnZW5lcmF0ZWQgYW5kIHNlbnQgZm9yIHNpZ25hdHVyZS5cblxuIiArCiAgICAgICJDbGllbnQ6ICIgKyBjbGllbnRDb21wYW55ICsgIlxuIiArCiAgICAgICJFbWFpbDogIiArIGNsaWVudEVtYWlsICsgIlxuIiArCiAgICAgICJUeXBlOiAiICsgY29udHJhY3RUeXBlICsgIlxuIiArCiAgICAgICJBbW91bnQ6ICQiICsgKHBhcnNlSW50KGFtb3VudCkgfHwgMCkudG9Mb2NhbGVTdHJpbmcoKSArICJcbiIgKwogICAgICAiU2lnbk5vdyBEb2MgSUQ6ICIgKyAoc2lnbk5vd0RvY0lkIHx8ICJOL0EiKSArICJcbiIgKwogICAgICAiSW52b2ljZTogIiArIChzdHJpcGVJbnZvaWNlVXJsIHx8ICJOL0EiKSwKICAgIHN0YXR1czogInRvIGRvIiwKICAgIHByaW9yaXR5OiAyLAogICAgdGFnczogWyJjb250cmFjdCIsICJhdXRvLWdlbmVyYXRlZCJdCiAgfSk7CiAgY29uc29sZS5sb2coIkNMSUNLVVA6IFRhc2sgcmVzcG9uc2U6ICIgKyBKU09OLnN0cmluZ2lmeSh0YXNrKS5zdWJzdHJpbmcoMCwgNTAwKSk7CiAgcmV0dXJuIHRhc2s7Cn0KCm1vZHVsZS5leHBvcnRzID0gYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykgewogIC8vIENPUlMKICByZXMuc2V0SGVhZGVyKCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4iLCAiKiIpOwogIHJlcy5zZXRIZWFkZXIoIkFjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMiLCAiUE9TVCwgT1BUSU9OUyIpOwogIHJlcy5zZXRIZWFkZXIoIkFjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMiLCAiQ29udGVudC1UeXBlLCBBdXRob3JpemF0aW9uIik7CgogIGlmIChyZXEubWV0aG9kID09PSAiT1BUSU9OUyIpIHsKICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuZW5kKCk7CiAgfQoKICBpZiAocmVxLm1ldGhvZCAhPT0gIlBPU1QiKSB7CiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBlcnJvcjogIk1ldGhvZCBub3QgYWxsb3dlZC4gVXNlIFBPU1QuIiB9KTsKICB9CgogIC8vIFNpbXBsZSBBUEkga2V5IGNoZWNrIChvcHRpb25hbCwgc2V0IHZpYSBlbnYgdmFyKQogIGNvbnN0IGFwaUtleSA9IHByb2Nlc3MuZW52LkFQSV9LRVk7CiAgaWYgKGFwaUtleSAmJiByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uICE9PSBgQmVhcmVyICR7YXBpS2V5fWApIHsKICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiAiVW5hdXRob3JpemVkIiB9KTsKICB9CgogIHRyeSB7CiAgICBjb25zdCBib2R5ID0gcmVxLmJvZHk7CgogICAgLy8gVmFsaWRhdGUgcmVxdWlyZWQgZmllbGRzCiAgICBjb25zdCByZXF1aXJlZCA9IFsiY29udHJhY3RfdHlwZSIsICJjbGllbnRfY29tcGFueSIsICJjbGllbnRfZmlyc3QiLCAiY2xpZW50X2xhc3QiLCAiY2xpZW50X3RpdGxlIiwgImNsaWVudF9lbWFpbCIsICJhbW91bnQiXTsKICAgIGZvciAoY29uc3QgZmllbGQgb2YgcmVxdWlyZWQpIHsKICAgICAgaWYgKCFib2R5W2ZpZWxkXSkgewogICAgICAgIGNvbnNvbGUubG9nKCdbU0tJUF0gSW5jb21wbGV0ZSBzdWJtaXNzaW9uLCBtaXNzaW5nOicsIGZpZWxkKTsgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgc2tpcHBlZDogdHJ1ZSwgbWVzc2FnZTogJ0luY29tcGxldGUgc3VibWlzc2lvbiAtIG1pc3NpbmcgZmllbGQ6ICcgKyBmaWVsZCB9KTsKICAgICAgfQogICAgfQoKICAgIGNvbnN0IGNvbnRyYWN0VHlwZSA9IGJvZHkuY29udHJhY3RfdHlwZSA9PT0gIlBoYXNlIDIiID8gInBoYXNlMiIgOiAic3ByaW50MSI7CiAgICBjb25zdCBhbW91bnQgPSBTdHJpbmcoYm9keS5hbW91bnQpLnJlcGxhY2UoL1ssJF0vZywgIiIpOwogICAgY29uc3QgY29udHJhY3REYXRlID0gYm9keS5kYXRlIHx8IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgiVCIpWzBdOwogICAgY29uc3QgZGF0ZU9iaiA9IG5ldyBEYXRlKGNvbnRyYWN0RGF0ZSArICJUMTI6MDA6MDAiKTsKICAgIGNvbnN0IGZvcm1hdHRlZERhdGUgPSBkYXRlT2JqLnRvTG9jYWxlRGF0ZVN0cmluZygiZW4tVVMiLCB7IHllYXI6ICJudW1lcmljIiwgbW9udGg6ICJsb25nIiwgZGF5OiAibnVtZXJpYyIgfSk7CiAgICBjb25zdCBmb3JtYXR0ZWRBbW91bnQgPSBOdW1iZXIoYW1vdW50KS50b0xvY2FsZVN0cmluZygiZW4tVVMiKTsKCiAgICBjb25zdCBkYXRhID0gewogICAgICBjb250cmFjdFR5cGUsCiAgICAgIGNsaWVudENvbXBhbnk6IGJvZHkuY2xpZW50X2NvbXBhbnksCiAgICAgIGNsaWVudEZpcnN0OiBib2R5LmNsaWVudF9maXJzdCwKICAgICAgY2xpZW50TGFzdDogYm9keS5jbGllbnRfbGFzdCwKICAgICAgY2xpZW50VGl0bGU6IGJvZHkuY2xpZW50X3RpdGxlLAogICAgICBmb3JtYXR0ZWRBbW91bnQsCiAgICAgIGZvcm1hdHRlZERhdGUsCiAgICAgIGRlbGl2ZXJhYmxlOiBib2R5LmRlbGl2ZXJhYmxlIHx8IGJvZHkuc2NvcGUgfHwgIiIsCiAgICAgIHNjb3BlOiBib2R5LnNjb3BlIHx8IGJvZHkuZGVsaXZlcmFibGUgfHwgIiIsCiAgICB9OwoKICAgIGNvbnN0IGNsaWVudE5hbWUgPSBgJHtib2R5LmNsaWVudF9maXJzdH0gJHtib2R5LmNsaWVudF9sYXN0fWA7CiAgICBjb25zdCBmaWxlTmFtZSA9IGAke2NvbnRyYWN0VHlwZSA9PT0gInBoYXNlMiIgPyAiUGhhc2UyIiA6ICJTcHJpbnQxIn1fJHtib2R5LmNsaWVudF9jb21wYW55LnJlcGxhY2UoL1teYS16QS1aMC05XS9nLCAiIil9X01TQV9TT1cuZG9jeGA7CgogICAgY29uc29sZS5sb2coYEdlbmVyYXRpbmcgJHtjb250cmFjdFR5cGV9IGNvbnRyYWN0IGZvciAke2NsaWVudE5hbWV9IGF0ICR7Ym9keS5jbGllbnRfY29tcGFueX0uLi5gKTsKCiAgICAvLyBTdGVwIDE6IEdlbmVyYXRlIHRoZSAuZG9jeAogICAgY29uc3QgZG9jeEJ1ZmZlciA9IGF3YWl0IGdlbmVyYXRlQ29udHJhY3QoZGF0YSk7CiAgICBjb25zb2xlLmxvZyhgQ29udHJhY3QgZ2VuZXJhdGVkOiAke2ZpbGVOYW1lfSAoJHtkb2N4QnVmZmVyLmxlbmd0aH0gYnl0ZXMpYCk7CgogICAgLy8gU3RlcCAyOiBBdXRoZW50aWNhdGUgd2l0aCBTaWduTm93CiAgICBjb25zdCB0b2tlbiA9IGF3YWl0IHNuQXV0aGVudGljYXRlKCk7CiAgICBjb25zb2xlLmxvZygiU2lnbk5vdyBhdXRoZW50aWNhdGVkIik7CgogICAgLy8gU3RlcCAzOiBVcGxvYWQgdG8gU2lnbk5vdwogICAgY29uc3QgZG9jSWQgPSBhd2FpdCBzblVwbG9hZCh0b2tlbiwgZG9jeEJ1ZmZlciwgZmlsZU5hbWUpOwogICAgY29uc29sZS5sb2coYFVwbG9hZGVkIHRvIFNpZ25Ob3c6ICR7ZG9jSWR9YCk7CgogICAgLy8gU3RlcCA0OiBHZXQgZG9jIGluZm8gZm9yIHBhZ2UgY291bnQKICAgIGNvbnN0IGRvY0luZm8gPSBhd2FpdCBzbkdldERvY0luZm8odG9rZW4sIGRvY0lkKTsKICAgIGNvbnN0IHBhZ2VDb3VudCA9IGRvY0luZm8ucGFnZV9jb3VudCB8fCAoZG9jSW5mby5wYWdlcyA/IGRvY0luZm8ucGFnZXMubGVuZ3RoIDogMSk7CiAgICBjb25zb2xlLmxvZyhgRG9jdW1lbnQgaGFzICR7cGFnZUNvdW50fSBwYWdlc2ApOwoKICAgIC8vIFN0ZXAgNTogQWRkIENMSUVOVC1PTkxZIGZpZWxkcwogICAgYXdhaXQgc25BZGRGaWVsZHModG9rZW4sIGRvY0lkLCBwYWdlQ291bnQpOwogICAgY29uc29sZS5sb2coIkNsaWVudCBzaWduYXR1cmUgZmllbGRzIGFkZGVkIik7CgogICAgLy8gU3RlcCA2OiBTZW5kIGludml0ZQogICAgaWYgKERJU0FCTEVfU0lHTk5PV19JTlZJVEUpIHsKICAgICAgY29uc29sZS5sb2coIltTSUdOTk9XXSBJbnZpdGUgc2VuZGluZyBESVNBQkxFRCIpOwogICAgfSBlbHNlIHsKICAgICAgYXdhaXQgc25TZW5kSW52aXRlKHRva2VuLCBkb2NJZCwgYm9keS5jbGllbnRfZW1haWwsIGNsaWVudE5hbWUpOwogICAgfQogICAgY29uc29sZS5sb2coYEludml0ZSBzZW50IHRvICR7Y2xpZW50TmFtZX0gKCR7Ym9keS5jbGllbnRfZW1haWx9KWApOwoKCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PSBTVFJJUEUgSU5WT0lDRSA9PT09PT09PT09PT09PT09PT09PQogICAgbGV0IHN0cmlwZVJlc3VsdCA9IG51bGw7CiAgICB0cnkgewogICAgICBjb25zdCBhbW91bnRDZW50cyA9IE1hdGgucm91bmQocGFyc2VGbG9hdChhbW91bnQpICogMTAwKTsKICAgICAgc3RyaXBlUmVzdWx0ID0gYXdhaXQgY3JlYXRlU3RyaXBlSW52b2ljZSgKICAgICAgICBib2R5LmNsaWVudF9lbWFpbCwgY2xpZW50TmFtZSwgYm9keS5jbGllbnRfY29tcGFueSwKICAgICAgICBhbW91bnRDZW50cywgY29udHJhY3RUeXBlID09PSAic3ByaW50MSIgPyAiQUkgVmlzaWJpbGl0eSBTcHJpbnQiIDogIlBoYXNlIDIgUmV0YWluZXIgLSAiICsgKGJvZHkuc2NvcGUgfHwgYm9keS5kZWxpdmVyYWJsZSB8fCAiIikKICAgICAgKTsKICAgICAgY29uc29sZS5sb2coIlNUUklQRTogU3VjY2VzcyAtIEludm9pY2UgVVJMOiAiICsgc3RyaXBlUmVzdWx0Lmludm9pY2VVcmwpOwogICAgfSBjYXRjaCAoc3RyaXBlRXJyKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoIlNUUklQRSBFUlJPUjogIiArIHN0cmlwZUVyci5tZXNzYWdlKTsKICAgICAgc3RyaXBlUmVzdWx0ID0geyBlcnJvcjogc3RyaXBlRXJyLm1lc3NhZ2UgfTsKICAgIH0KCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PSBDTElDS1VQIE5PVElGSUNBVElPTiA9PT09PT09PT09PT09PT09PT09PQogICAgbGV0IGNsaWNrdXBSZXN1bHQgPSBudWxsOwogICAgdHJ5IHsKICAgICAgY2xpY2t1cFJlc3VsdCA9IGF3YWl0IGNyZWF0ZUNsaWNrVXBUYXNrKAogICAgICAgIGJvZHkuY2xpZW50X2NvbXBhbnksIGNvbnRyYWN0VHlwZSwgYW1vdW50LCBib2R5LmNsaWVudF9lbWFpbCwKICAgICAgICBkb2NJZCwgc3RyaXBlUmVzdWx0ICYmIHN0cmlwZVJlc3VsdC5pbnZvaWNlVXJsID8gc3RyaXBlUmVzdWx0Lmludm9pY2VVcmwgOiBudWxsCiAgICAgICk7CiAgICAgIGNvbnNvbGUubG9nKCJDTElDS1VQOiBTdWNjZXNzIC0gVGFzayBJRDogIiArIChjbGlja3VwUmVzdWx0LmlkIHx8ICJ1bmtub3duIikpOwogICAgfSBjYXRjaCAoY2xpY2t1cEVycikgewogICAgICBjb25zb2xlLmVycm9yKCJDTElDS1VQIEVSUk9SOiAiICsgY2xpY2t1cEVyci5tZXNzYWdlKTsKICAgICAgY2xpY2t1cFJlc3VsdCA9IHsgZXJyb3I6IGNsaWNrdXBFcnIubWVzc2FnZSB9OwogICAgfQoKICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7CiAgICAgIHN1Y2Nlc3M6IHRydWUsCiAgICAgIG1lc3NhZ2U6ICJDb250cmFjdCBnZW5lcmF0ZWQsIHVwbG9hZGVkIHRvIFNpZ25Ob3ciICsgKHN0cmlwZVJlc3VsdCAmJiAhc3RyaXBlUmVzdWx0LmVycm9yID8gIiwgU3RyaXBlIGludm9pY2UgY3JlYXRlZCIgOiAiIikgKyAoY2xpY2t1cFJlc3VsdCAmJiAhY2xpY2t1cFJlc3VsdC5lcnJvciA/ICIsIENsaWNrVXAgdGFzayBjcmVhdGVkIiA6ICIiKSwKICAgICAgZG9jdW1lbnRfaWQ6IGRvY0lkLAogICAgICBjb250cmFjdF90eXBlOiBjb250cmFjdFR5cGUsCiAgICAgIGNsaWVudDogY2xpZW50TmFtZSwKICAgICAgY29tcGFueTogYm9keS5jbGllbnRfY29tcGFueSwKICAgICAgYW1vdW50OiBmb3JtYXR0ZWRBbW91bnQsCiAgICAgIHN0cmlwZTogc3RyaXBlUmVzdWx0IHx8IHsgc2tpcHBlZDogdHJ1ZSB9LAogICAgICBjbGlja3VwOiBjbGlja3VwUmVzdWx0ID8geyBpZDogY2xpY2t1cFJlc3VsdC5pZCwgdXJsOiBjbGlja3VwUmVzdWx0LnVybCB9IDogeyBza2lwcGVkOiB0cnVlIH0KICAgIH0pOwoKICB9IGNhdGNoIChlcnIpIHsKICAgIGNvbnNvbGUuZXJyb3IoIkVycm9yOiIsIGVyci5tZXNzYWdlKTsKICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7CiAgICAgIHN1Y2Nlc3M6IGZhbHNlLAogICAgICBlcnJvcjogZXJyLm1lc3NhZ2UsCiAgICB9KTsKICB9Cn07Cg=="}